commit a11166bdbecc85995a1aef58fcb7635091049708
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Oct 11 17:50:30 2007 -0400

    update NEWS

 NEWS |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)

commit 5b60edc135496fa4bdc9f1623a7b22501adb77a9
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Sep 27 13:46:29 2007 -0400

    make polkit-list-actions print information about <allow_any>

 tools/polkit-list-actions.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit b420cc512b3277cac57c2c2231adf80cefd7e764
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Sep 27 13:36:11 2007 -0400

    don't fail on unknown XML tags, just skip them

    This change will futureproof libpolkit for extensions; e.g. if there's
    an OS upgrade where

     a) the PolicyKit package is upgraded to a version where support for a
        new tag <allow_foo> is added; and

     b) another package, using PolicyKit, is upgraded dropping a .policy
        file using the new <allow_foo> tag; then

    existing running processes using libpolkit will not fail. They will,
    however, not honor the new tags until the daemon process itself is
    restarted using e.g. condrestart.

    We also log to the system logger whenever we encouter unknown tags.

 doc/TODO                    |    4 ---
 polkit/polkit-config.c      |   32 +++++++++++++++++-----
 polkit/polkit-policy-file.c |   63
 +++++++++++++++++++------------------------
 3 files changed, 53 insertions(+), 46 deletions(-)

commit 4714fe721988d533a912ac62df5088f24f5bc699
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Sep 27 12:08:19 2007 -0400

    implement <allow_any> to specify default answer for any user

    This is useful in instances where the OS vendor wants to allow any
    user, even remote users logging in via ssh etc., but recognize that
    some sites may want to lock this down to a limited set of users.

    Suggested by Daniel P. Berrange <berrange@redhat.com>:

    <danpb>  my specific use case is that in libvirt we don't mind
    any user
             querying for VM status info by default
    <danpb>  but some admins may wish to lock that ability down
    <danpb>  so only designated users can query VM status
    <davidz> right
    <davidz> it makes sense
    <davidz> without having giving it too much thought; adding another
    stanza to
             the .policy file might make sense
    <davidz> <allow_non_session>yes</allow_non_session>
    <davidz> danpb: would that work?
    <danpb>  yeah, that'd do the trick
    <davidz> cool
    <davidz> I'll add it then

 doc/spec/polkit-spec-configuration.xml |   15 ++++++++++-----
 polkit/polkit-policy-default.c         |   29
 +++++++++++++++++++++++++++--
 polkit/polkit-policy-default.h         |    1 +
 polkit/polkit-policy-file-entry.c      |    8 ++++++--
 polkit/polkit-policy-file.c            |   20 ++++++++++++++++++--
 5 files changed, 62 insertions(+), 11 deletions(-)

commit 60d85b947457940978a9c153a59a80c87d46ab4e
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Sep 26 15:49:31 2007 -0400

    add TODO item detailing how to handle upgrades

 doc/TODO |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 24973905a6cefbcb13a718218ac561fbece7fd9f
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Sep 25 16:38:32 2007 -0400

    add specifics for the Pardus distro

    Patch from S.Çağlar Onur <caglar@pardus.org.tr>. Thanks.

 configure.in |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit a8ab4c970363996890c22ffdb2b1eb48b6ac0f6e
Author: Doug Goldstein <cardoe@gentoo.org>
Date:   Thu Sep 6 23:53:53 2007 -0400

    use chgrp instead of chown with group only

    Change to use chgrp instead of chown when only changing a group

 polkit-grant/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 3a8a84ec380aed65e98c2c28e1c558d3827915db
Author: Doug Goldstein <cardoe@gentoo.org>
Date:   Thu Sep 6 16:14:24 2007 -0400

    install hook for setuid/setgid

    Current installation uses a local rule which isn't guarenteed to
    be run
    after the automake'd rule, as such it will not always setuid/setgid
    properly.
    This patch switches that to a hook which is guarenteed to run
    afterwards.

 polkit-grant/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3406f9f20826473dbf2de8c0dbd71f0b5bb8c8e7
Author: Doug Goldstein <cardoe@gentoo.org>
Date:   Thu Sep 6 12:07:20 2007 -0400

    gentoo OS type support

    Adds Gentoo as a valid OS type

 configure.in |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 1b8d31e1fef50dd4ff3ddc5bee539175dc93daa5
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 31 15:59:59 2007 -0400

    post-release version bump

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit aef7a201260133535c035ba7183f8e96bd25954f
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 31 15:56:07 2007 -0400

    update NEWS file

 NEWS |   66
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 66 insertions(+), 0 deletions(-)

commit 1817a0fc0499a79cb37c1610d3970e66d78c150b
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 31 15:48:52 2007 -0400

    bump so name

 configure.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2b27f63a2b49c57e83a82bc4966fadde02b62f1d
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 31 15:48:38 2007 -0400

    fix 'make distcheck' by avoiding with man pages on distcheck

 Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 6642ec69b4e379897e146a47df25240f4153af2d
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 31 13:51:10 2007 -0400

    make polkit-grant-helper-pam out of reach for normal users

    Adds a little bit of more security..

 polkit-grant/Makefile.am |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 61b3adc5b393b4070c19818f558dd76ac4b4d880
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Aug 28 13:33:18 2007 -0400

    add an example of how define_admin_auth is used

    Based on input from Ken VanDine

    http://lists.freedesktop.org/archives/hal/2007-August/009402.html

 doc/man/PolicyKit.conf.xml |   21 ++++++++++++++++++++-
 1 files changed, 20 insertions(+), 1 deletions(-)

commit ba0e33beeae7d066fc87359d31ac1517dd4c2385
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 27 16:41:40 2007 -0400

    minor doc changes

 COPYING                               |   14 ++++++++------
 doc/spec/polkit-spec-introduction.xml |   26 +++++++++++++++-----------
 2 files changed, 23 insertions(+), 17 deletions(-)

commit 51dc397f6a3ce098dced0b3a18b59f968f533bc9
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 27 16:39:59 2007 -0400

    also forgot to add polkit-docs.xml

 doc/polkit-docs.xml |  163
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 163 insertions(+), 0 deletions(-)

commit 292f230cddaf923def3ab757f04dfa39747269a8
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 27 14:06:30 2007 -0400

    also add another missing file

 tools/polkit-config-file-validate.c |  102
 +++++++++++++++++++++++++++++++++++
 1 files changed, 102 insertions(+), 0 deletions(-)

commit f936af0ad56278b87121c82057e4de533d60bfe2
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 27 13:34:49 2007 -0400

    forgot to add doc/version.xml.in

 doc/version.xml.in |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e55cb2360ae0f4d065d76ad7df25f4210a9607c8
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 27 11:27:39 2007 -0400

    make config file override grant database

    Even though a caller may have an entry in the grant database (and as
    such will see POLKIT_RESULT_YES), change the behavior such that this
    is no longer honored unless the config file specifies the result
    POLKIT_RESULT_ONLY_VIA_[SELF|ADMIN]_AUTH_{,KEEP_SESSION|KEEP_ALWAYS}.

    E.g. this allows the sysadmin to specify things like POLKIT_RESULT_NO
    in the config file and that will now make existing grants
    useless. This behavior is a lot more natural.

 polkit/polkit-context.c |   41 ++++++++++++++++++++++++++++++++---------
 1 files changed, 32 insertions(+), 9 deletions(-)

commit 4f807a94b5116dabf15a10876d7a22f5a0587e31
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 18:44:14 2007 -0400

    some more doc fixes

 doc/Makefile.am                   |    2 +-
 polkit-grant/polkit-grant.c       |    3 +--
 polkit-grant/polkit-grant.h       |    4 ++--
 polkit/polkit-action.c            |    2 +-
 polkit/polkit-action.h            |    4 ++--
 polkit/polkit-caller.c            |    2 +-
 polkit/polkit-caller.h            |    4 ++--
 polkit/polkit-config.c            |    4 ++--
 polkit/polkit-config.h            |    4 ++--
 polkit/polkit-context.c           |    2 +-
 polkit/polkit-context.h           |    4 ++--
 polkit/polkit-error.c             |    2 +-
 polkit/polkit-error.h             |    4 ++--
 polkit/polkit-grant-database.c    |   10 +++++-----
 polkit/polkit-grant-database.h    |   11 +++++++----
 polkit/polkit-policy-cache.c      |    4 ++--
 polkit/polkit-policy-cache.h      |    4 ++--
 polkit/polkit-policy-default.c    |    2 +-
 polkit/polkit-policy-default.h    |    4 ++--
 polkit/polkit-policy-file-entry.c |    2 +-
 polkit/polkit-policy-file-entry.h |    4 ++--
 polkit/polkit-policy-file.c       |    2 +-
 polkit/polkit-policy-file.h       |    4 ++--
 polkit/polkit-seat.c              |    2 +-
 polkit/polkit-seat.h              |    4 ++--
 polkit/polkit-session.c           |    2 +-
 polkit/polkit-session.h           |    4 ++--
 polkit/polkit-types.h             |    7 +++++++
 tools/polkit-grant.c              |    2 +-
 29 files changed, 59 insertions(+), 50 deletions(-)

commit 69959d3ae71fec1f107cb8d7df2849dd16bb0422
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 18:12:07 2007 -0400

    update inline API docs

 polkit-dbus/polkit-dbus.c         |    5 +++--
 polkit-grant/polkit-grant.c       |   10 +++++++---
 polkit/polkit-action.c            |    5 +++--
 polkit/polkit-caller.c            |    8 +++++---
 polkit/polkit-config.c            |    3 ++-
 polkit/polkit-context.c           |    3 ++-
 polkit/polkit-error.c             |    3 ++-
 polkit/polkit-policy-cache.c      |    3 ++-
 polkit/polkit-policy-default.c    |    3 ++-
 polkit/polkit-policy-file-entry.c |    3 ++-
 polkit/polkit-policy-file.c       |    3 ++-
 polkit/polkit-result.c            |    3 ++-
 polkit/polkit-seat.c              |    5 +++--
 polkit/polkit-session.c           |    5 +++--
 polkit/polkit-types.h             |    5 +++--
 15 files changed, 43 insertions(+), 24 deletions(-)

commit a10dd21e9d98b1cccb3c9107ad6ea26bed225255
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 17:25:58 2007 -0400

    fix up manual pages for some trivial errors

 doc/Makefile.am                         |    3 +++
 doc/man/PolicyKit.xml                   |    2 +-
 doc/man/polkit-config-file-validate.xml |    2 +-
 doc/man/polkit-list-actions.xml         |    2 +-
 doc/man/polkit-policy-file-validate.xml |    2 +-
 5 files changed, 7 insertions(+), 4 deletions(-)

commit 05afd47a12afe07601a426022b46584c33f61d6f
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 17:18:12 2007 -0400

    revert "fixed code documentation issues"

    This commit is wrong as the docs are not properly formatted with this
    change. This reverts commit 0d69cdc59f51fda93c857171b69ac8f3fe46b745.

 polkit-grant/polkit-grant.c |    1 +
 polkit-grant/polkit-grant.h |   24 ++++++++++++------------
 polkit/polkit-context.h     |    8 ++++----
 3 files changed, 17 insertions(+), 16 deletions(-)

commit aa5d6085a352ef764980b2b78ac47f1625d4fa03
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 17:15:26 2007 -0400

    clean up our documentation

     - Put all three libraries in the same gtk-doc project
     - Include the spec in the gtk-doc project
     - Include the manual pages in the gtk-doc project

 configure.in                               |   56 +--
 doc/Makefile.am                            |   76 +++-
 doc/api/Makefile.am                        |    9 -
 doc/api/polkit-dbus/Makefile.am            |   67 ---
 doc/api/polkit-dbus/polkit-dbus-docs.xml   |  109 -----
 doc/api/polkit-dbus/version.xml.in         |    1 -
 doc/api/polkit-grant/Makefile.am           |   67 ---
 doc/api/polkit-grant/polkit-grant-docs.xml |  109 -----
 doc/api/polkit-grant/version.xml.in        |    1 -
 doc/api/polkit/Makefile.am                 |   67 ---
 doc/api/polkit/polkit-docs.xml             |  121 -----
 doc/api/polkit/version.xml.in              |    1 -
 doc/man/Makefile.am                        |   27 +-
 doc/man/PolicyKit.conf.xml                 |  713
 ++++++++++++++--------------
 doc/man/PolicyKit.xml                      |  136 +++---
 doc/man/polkit-config-file-validate.xml    |  199 ++++----
 doc/man/polkit-grant.xml                   |  239 +++++-----
 doc/man/polkit-list-actions.xml            |  191 ++++----
 doc/man/polkit-policy-file-validate.xml    |  197 ++++----
 doc/spec/Makefile.am                       |   30 --
 doc/spec/config.xsl                        |    6 -
 doc/spec/docbook.css                       |   18 -
 doc/spec/polkit-spec.xml.in.in             |   26 -
 polkit-grant/polkit-grant-helper.c         |    2 +-
 polkit/polkit-config.c                     |    8 +-
 polkit/polkit-config.h                     |    2 +-
 polkit/polkit-context.c                    |   25 +-
 polkit/polkit-context.h                    |    2 +-
 tools/Makefile.am                          |    9 +-
 tools/polkit-list-actions.c                |    3 +-
 30 files changed, 937 insertions(+), 1580 deletions(-)

commit 7b3f73291a742e8ef41cd4b63dcbb79d599c88ad
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Aug 24 15:31:35 2007 -0400

    convert manual page sources to Docbook, add
    polkit-config-file-validate tool

    Also drop the polkit-check-caller and polkit-check-session tools;
    they're not really useful in their current incarnation.

 doc/man/PolicyKit.8.in                   |   35 ---
 doc/man/PolicyKit.conf.5.in              |  236 ------------------
 doc/man/PolicyKit.conf.xml               |  380
 ++++++++++++++++++++++++++++++
 doc/man/PolicyKit.xml                    |   74 ++++++
 doc/man/polkit-check-caller.1.in         |   65 -----
 doc/man/polkit-check-session.1.in        |   65 -----
 doc/man/polkit-config-file-validate.xml  |  105 ++++++++
 doc/man/polkit-grant.xml                 |  125 ++++++++++
 doc/man/polkit-list-actions.1.in         |   44 ----
 doc/man/polkit-list-actions.xml          |  101 ++++++++
 doc/man/polkit-policy-file-validate.1.in |   53 ----
 doc/man/polkit-policy-file-validate.xml  |  104 ++++++++
 tools/polkit-check-caller.c              |  164 -------------
 tools/polkit-check-session.c             |  173 --------------
 14 files changed, 889 insertions(+), 835 deletions(-)

commit 3b73f007910c5436828b4cecdd1e47eee40eaf0c
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 23 21:30:55 2007 -0400

    delay loading the configuration until it's needed

    This is especially good for saving CPU cycles as we may get a number
    events from inotify and previously we kept reloading/parsing the
    configuration file on every event.

 polkit/polkit-context.c |   78
 ++++++++++++++++++++++++-----------------------
 1 files changed, 40 insertions(+), 38 deletions(-)

commit 2816f794b5d52f496060d1f2d1d76c7bdf69dec0
Merge: a0267b8... c27e93f...
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 23 21:08:01 2007 -0400

    Merge branch 'master' of ssh://david@git.freedesktop.org/git/PolicyKit

commit a0267b82eff268882a65214304381dbcbddc8978
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 23 21:07:46 2007 -0400

    give a little love to polkit-list-actions(1) and polkit-grant(1)

    In addition polkit-grant(1) gained a few new features

     --list          : for listing all grants
     --delete <user> : for deleting all grants given to an user

 polkit/polkit-grant-database.c |  182 +++++++++++++++++++++++++++++
 polkit/polkit-grant-database.h |   37 ++++++
 polkit/polkit-policy-cache.c   |   58 +++++++---
 polkit/polkit-policy-cache.h   |    2 +
 tools/Makefile.am              |    2 +-
 tools/polkit-grant.c           |  245
 ++++++++++++++++++++++++++--------------
 tools/polkit-list-actions.c    |   71 +++++++++---
 7 files changed, 481 insertions(+), 116 deletions(-)

commit c27e93f7faf2901cbd0d3cd5b4bd9ce87f8ca7cb
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Thu Aug 23 14:23:02 2007 +0200

    fixed compiler warning about uid_t handling

    This fixes the same problem with uid_t as we had with HAL some
    time ago
    on 64bit architectures in PolicyKit. This time I removed the useless
    check:

       uid == ((unsigned long) -1)

    because this is always false on 64bit (comparison is always false
    due to
    limited range of data type) and because the DBusError from the
    dbus_bus_get_unix_user() call is set if the function returns
    DBUS_UID_UNSET
    so we need only to check if the error is set.

 polkit-dbus/polkit-dbus.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0d69cdc59f51fda93c857171b69ac8f3fe46b745
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Thu Aug 23 14:05:34 2007 +0200

    fixed code documentation issues

    Fixed code documentation issues:
     * s/<programlisting>/@code/
     * removed @void: from polkit_grant_new()

 polkit-grant/polkit-grant.c |    1 -
 polkit-grant/polkit-grant.h |   24 ++++++++++++------------
 polkit/polkit-context.h     |    8 ++++----
 3 files changed, 16 insertions(+), 17 deletions(-)

commit 9924987f324953fa9e58b937dfedc1cc06ece0b3
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Aug 22 18:32:50 2007 -0400

    add support for annotations

 doc/spec/polkit-spec-configuration.xml |   55 +++++++++++++++++++++
 polkit/polkit-policy-file-entry.c      |   82
 +++++++++++++++++++++++++++++++-
 polkit/polkit-policy-file-entry.h      |   20 ++++++++
 polkit/polkit-policy-file.c            |   41 +++++++++++++++-
 4 files changed, 193 insertions(+), 5 deletions(-)

commit 25b04730781d2ea560696f1212f661765438ad28
Author: Richard Hughes <hughsient@gmail.com>
Date:   Wed Aug 22 15:36:15 2007 -0400

    work when SELinux is disabled

    I've compiled with selinux and have it turned off. The attached patch
    stops the warnings for me.

    Richard.

 polkit-dbus/polkit-dbus.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

commit 07b101ecc84ced454200a21bdcbacd450568753d
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 23:01:19 2007 -0400

    gracefully handle bad config/policy files, drop polkit-reload-config,
    syslog

     - don't abort/malfunction if the /etc/PolicyKit/PolicyKit.conf
       configuration file is malformed; simply just continue as normal
       but return 'no' to every question asked. Also use syslog(3) to
       report this to the system log

     - if a .policy file is malformed, simply skip it and still include
       other well-formed .policy files. Use syslog(3) to report if indeed
       a .policy file is malformed.

     - drop /var/lib/PolicyKit/reload and rely on inotify to detect
     changes to
       - /etc/PolicyKit/PolicyKit.conf
       - Policy files in /usr/share/PolicyKit/policy
       - privileges in /var/lib/PolicyKit and /var/run/PolicyKit

    As a result, changes made to /etc/PolicyKit/PolicyKit.conf (typically
    an admin edits this file) and .policy files (typically these can
    change on package upgrades) in /usr/share/PolicyKit/policy are
    instantly picked up.

 doc/TODO                           |    6 --
 doc/man/Makefile.am                |    2 +-
 doc/man/PolicyKit.conf.5.in        |   12 ++-
 doc/man/polkit-reload-config.1.in  |   36 ---------
 polkit-grant/polkit-grant-helper.c |   10 +--
 polkit/Makefile.am                 |    5 --
 polkit/polkit-context.c            |  140
 +++++++++++++++++++++++++-----------
 polkit/polkit-policy-cache.c       |   12 +++-
 tools/Makefile.am                  |    7 --
 tools/polkit-reload-config.in      |    2 -
 10 files changed, 120 insertions(+), 112 deletions(-)

commit 49e3a102cdb6bb30926889adf68d66be8be9491b
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 21:48:21 2007 -0400

    avoid the now defunct group concept in polkit-list-actions

 tools/polkit-list-actions.c |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit f2399d093f968c63b9b572a3f4b27a850d5695c9
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 21:47:25 2007 -0400

    minor doc cleanups

 doc/man/PolicyKit.8.in      |    6 +++---
 doc/man/PolicyKit.conf.5.in |   20 ++++++++------------
 2 files changed, 11 insertions(+), 15 deletions(-)

commit 829838ea1df46923f9cdfe93af74c44c7e1752b2
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 20:38:24 2007 -0400

    rip out group concept from .policy files and rename <policy> element
    to <action>

 doc/spec/polkit-spec-configuration.xml |  135
 +++++++++++++-------------------
 polkit/polkit-action.c                 |   41 ++++++++++-
 polkit/polkit-action.h                 |    2 +
 polkit/polkit-policy-file-entry.c      |   48 +-----------
 polkit/polkit-policy-file-entry.h      |    2 -
 polkit/polkit-policy-file.c            |  118
 +++++++---------------------
 6 files changed, 129 insertions(+), 217 deletions(-)

commit 1f431e5f5bdf251edad794ec2259e8576d2892f7
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 19:59:49 2007 -0400

    make libpolkit-grant less noisy

 polkit-grant/polkit-grant-helper.c |    6 ++++++
 polkit-grant/polkit-grant.c        |    2 +-
 2 files changed, 7 insertions(+), 1 deletions(-)

commit 6efff0882a712424eeee0d7644b213127b3eded6
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 19:59:10 2007 -0400

    make polkit-grant(1) work with <define_admin_user /> feature

 tools/polkit-grant.c |   53
 +++++++++++++++++++++++++++++++++++++------------
 1 files changed, 40 insertions(+), 13 deletions(-)

commit 7090ddbacaabf318d7d87c9b93ce5805fa765c06
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 17:54:33 2007 -0400

    handle the case where we don't load descriptions

 polkit/polkit-policy-file.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 07bd50776b1be13f506f9a75763ecc32a469d408
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 20 17:51:02 2007 -0400

    properly support i18n'ed messages from .policy files

    Ugh, I'm not sure if there's a smarter way of dealing with xml:lang
    when using expat (google searches for this suggests no) but the way I
    fixed this is surely a bitch.

 polkit/polkit-policy-file.c |  206
 ++++++++++++++++++++++++++++++++++--------
 1 files changed, 166 insertions(+), 40 deletions(-)

commit af39b832e3bf2e46fe58af74304d7f6f85e853bf
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Aug 13 13:44:33 2007 -0400

    export PolKitConfig and provide a <define_admin_auth/> config file
    directive

    Also change the libpolkit-grant API a bit to work with these changes.

 doc/TODO                           |    9 +-
 doc/api/polkit/polkit-docs.xml     |    2 +-
 doc/man/PolicyKit.conf.5.in        |   44 +++++-
 polkit-grant/polkit-grant-helper.c |  237 ++++++++++++++++++++++++++++--
 polkit-grant/polkit-grant.c        |   85 ++++++++---
 polkit-grant/polkit-grant.h        |   20 +++
 polkit/Makefile.am                 |    3 +-
 polkit/polkit-config.c             |  283
 ++++++++++++++++++++++++++++--------
 polkit/polkit-config.h             |   25 +++-
 polkit/polkit-context.c            |   20 +++
 polkit/polkit-context.h            |    9 +-
 11 files changed, 616 insertions(+), 121 deletions(-)

commit 7034e0c24e37963d72a50371ed6ad6a51a740d02
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 9 16:39:16 2007 -0400

    when granting privileges, touch the /var/lib/PolicyKit/reload file

    This means that all libpolkit-using processes should recieve a
    config_changed() callback whenever privileges are granted.

    Remember to update your RPM spec files etc. such that group polkituser
    (or equiv.) is permitted to write to the reload file.

 polkit-grant/polkit-grant-helper.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 5795bf6b779d6e6e0ae87d7d912a5bcefaec580b
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 9 16:37:36 2007 -0400

    make the /var/lib/PolicyKit/reload writable for group polkituser

 polkit/Makefile.am |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 1e9a533c9c44e8c421bc9f48017258aab21adde5
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Aug 9 12:37:55 2007 -0400

    use correct type for conversation_done() function

    fix proposed by Danny Kukawka <danny.kukawka@web.de>

 tools/polkit-grant.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2e3b7bd46951ea51804f1b3848d2f9034176b152
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 31 11:19:27 2007 -0400

    post-release version number bump

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 6377a81b93b7c7c32de02477e40f6368334bedc7
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 30 19:56:46 2007 -0400

    provide a high-level interaction diagram of how this works

 polkit-grant/polkit-grant-helper.c |   67
 ++++++++++++++++++++++++++++++++++-
 1 files changed, 65 insertions(+), 2 deletions(-)

commit 1f90f7e15095b9fdd0374fef98fbb3241a2b2ad6
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 30 19:29:47 2007 -0400

    use waitpid() to avoid Zombie processes

 polkit-grant/polkit-grant.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 6e2d74cb86e529ab8ec964d6a0f632535fc78a9c
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 30 19:11:42 2007 -0400

    put back isatty() checks when calling user is not uid 0

 polkit-grant/polkit-grant-helper-pam.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 1ac3268b7a787d2a9ae641355b80b7f3131bea71
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 30 19:08:58 2007 -0400

    remove the isatty() call so it's easier to audit the helper

    The isatty() check is just to catch users poking around; it provides
    little or no real security. With this change, you can do stuff like

    $ /usr/libexec/polkit-grant-helper-pam
    davidz
    PAM_PROMPT_ECHO_OFF Password:
    <enter real password here>
    SUCCESS

    $ /usr/libexec/polkit-grant-helper-pam
    davidz
    PAM_PROMPT_ECHO_OFF Password:
    not_my_password
    polkit-grant-helper-pam: pam_authenticated failed: Authentication
    failure
    FAILURE

    which is useful for auditing.

 polkit-grant/polkit-grant-helper-pam.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 368397f96a472bfedd596c8890586cc4fd9a0428
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 30 18:54:36 2007 -0400

    move PAM stack usage to separate helper

    So it turns out that I hadn't been using shadow passwords on my other
    development box (don't ask) and that's why auth as root worked fine
    when just running as an unprivileged user. However, to auth as another
    user (such as root), the process embedding pam needs to run as
    root. Therefore, split out the actual authentication bits into a small
    and easy to audit helper, polkit-grant-helper-pam.

    The auth now goes like this:

     polkit-gnome <-links with-> libpolkit-grant
                                       ^
                                       |
                                    spawns
                                       |
                                       V
                         /usr/libexec/polkit-grant-helper
                                       ^
                                       |
                                    spawns
                                       |
                                       V
                       /usr/libexec/polkit-grant-helper-pam

    where

     polkit-grant-helper
        is setgid polkit; it links with libdbus and libpolkit.

     polkit-grant-helper-pam
        is setuid root; it links only with libpam

 configure.in                           |    5 +-
 polkit-grant/Makefile.am               |   17 +-
 polkit-grant/polkit-grant-helper-pam.c |  225 +++++++++++++++
 polkit-grant/polkit-grant-helper.c     |  494
 ++++++++++++++------------------
 polkit-grant/polkit-grant.c            |   20 +-
 5 files changed, 466 insertions(+), 295 deletions(-)

commit c1c6366d7102990904ac1c9f4aa6b9c8ef9b7a65
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Fri Jul 27 12:12:35 2007 +0200

    added missing files to git repo

    Added missing files from PolicyKit 0.4 release package to the
    git repo: data/PolicyKit.conf.in, data/config.dtd

 data/PolicyKit.conf.in |    9 +++++++++
 data/config.dtd        |   18 ++++++++++++++++++
 2 files changed, 27 insertions(+), 0 deletions(-)

commit b39bfb80c0ec8995f4fea3d42223b5b450ad11ec
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 22:00:56 2007 -0400

    actually reload config and policy files when they change

 NEWS                    |    4 +++-
 polkit/polkit-context.c |   22 ++++++++++++++++++++++
 2 files changed, 25 insertions(+), 1 deletions(-)

commit 2e003e3be728729d344371c80e2a88722f546201
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 21:38:20 2007 -0400

    update NEWS

 NEWS |   40 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 40 insertions(+), 0 deletions(-)

commit 6da30d9867aa5956c11691554e7923d88857fe04
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 20:37:43 2007 -0400

    for PolKitContext, mention that a mechanism need to provide .policy
    files

 polkit/polkit-context.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 0da3d306107ff0f6958dba70ff585dc0e66cfbff
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 18:02:54 2007 -0400

    fix up proper naming of some methods on the PolKitPolicyFileEntry
    class

 polkit/polkit-policy-file-entry.c |   16 ++++++++--------
 polkit/polkit-policy-file-entry.h |    6 +++---
 tools/polkit-list-actions.c       |    4 ++--
 3 files changed, 13 insertions(+), 13 deletions(-)

commit bc1a540a0dc297bed4d21aedcc718b929d8fed4d
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 18:02:10 2007 -0400

    fix docs

 polkit-dbus/polkit-dbus.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e833c740cb2b124e451b028637148bc829c3c650
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 17:47:45 2007 -0400

    require that policy files also provide a <message> element

    Declaring an action now requires two textual elements (that both are
    subject to translation):

     description: This is intended to be used in policy editors, for
                  example "Mount internal volumes".
     message:     This is to be used in auth dialogs, for example "System
                  Policy prevents mounting this internal volume".

    This is actually needed for security reasons. The idea is that the
    desktop environment can provide infrastructure that Callers
    (e.g. applications) can use to ask the user to authenticate to gain a
    privilege. One such example is PolicyKit-gnome; it's a D-Bus session
    based service that applications can use to ask the user to
    auth.

    Before this change the caller provided the markup, e.g. gnome-mount
    would do

     action = "hal-storage-mount-fixed";
     markup = _("System policy prevents mounting internal drives");
     result = org.gnome.PolicyKit.ShowDialog (action, markup);

    and the problem here is that any application in the session can spoof
    the dialog by providing false information and getting to use to click
    through on that.

    With this change, where the org.gnome.PolicyKit auth service reads the
    message from a system-controlled file, this can't happen. What the
    user sees really reflects the action he's asking to consider allowing
    to happen.

    Especially with things like XACE (previously known as SEX) this is
    important as we can make the process providing the D-Bus service
    org.gnome.PolicyKit run in a dedicated security context, audit it to
    make sure it's secure. Then have the window manager paint trust window
    decorations or other things to make the user feel fuzzy, warm and
    safe.

    Btw, with this change the PolicyKit-gnome API will be simplified to

     action = "hal-storage-mount-fixed";
     result = org.gnome.PolicyKit.ShowDialog (action);

    which is just about as simple as it can get.

    Credit goes to Ryan Lortie <desrt@desrt.ca> for pointing this out
    on #gnome-hackers earlier this morning.

 polkit/polkit-policy-file-entry.c |   36
 +++++++++++++++++++++++++++++++++---
 polkit/polkit-policy-file-entry.h |    1 +
 polkit/polkit-policy-file.c       |   36
 ++++++++++++++++++++++++++++++++----
 3 files changed, 66 insertions(+), 7 deletions(-)

commit 4a9a4e1829db0c88040db31b1e5287463ff268b3
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 15:00:57 2007 -0400

    fix typo

 COPYING             |    2 +-
 data/Makefile.am    |    2 +-
 doc/man/Makefile.am |    2 +-
 polkit/Makefile.am  |    4 ++--
 tools/Makefile.am   |    5 +++--
 5 files changed, 8 insertions(+), 7 deletions(-)

commit e54dc4407bbec6b76e48736cd1ba34d2c3c67028
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jul 25 14:11:36 2007 -0400

    change default username

    - change user from 'polkit' to 'polkituser'
    - create directories in /var from polkit instead of polkit-grant

 configure.in             |    4 ++--
 polkit-grant/Makefile.am |   11 -----------
 polkit/Makefile.am       |    6 ++++++
 3 files changed, 8 insertions(+), 13 deletions(-)

commit a9860cf824a6503e09ea43070178676b39ca92f2
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 24 17:42:08 2007 -0400

    fix up some of the docs

 doc/TODO                       |    6 +++-
 polkit-dbus/polkit-dbus.c      |   25 +++++++++++++++-
 polkit/polkit-config.c         |   61
 ++++++++++++++++++++++++++++++++++++++++
 polkit/polkit-context.c        |   23 +++++++++++++--
 polkit/polkit-grant-database.c |    7 ++++
 polkit/polkit-result.c         |    9 ++++-
 6 files changed, 123 insertions(+), 8 deletions(-)

commit e13a83721307711f257e9222a4d6adebda78f662
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 24 16:05:43 2007 -0400

    remove RESULT_NOT_AUTHORIZED_TO_KNOW and
    s/RESULT_UNKNOWN_ACTION/RESULT_UNKNOWN/

 polkit/polkit-config.c         |    8 ++++----
 polkit/polkit-context.c        |   19 +++++++++----------
 polkit/polkit-grant-database.c |    2 +-
 polkit/polkit-policy-default.c |    1 -
 polkit/polkit-result.c         |    3 +--
 polkit/polkit-result.h         |    8 ++++----
 6 files changed, 19 insertions(+), 22 deletions(-)

commit 4b20f49298850060274e4bba842181b7c033d1e7
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 24 15:41:58 2007 -0400

    switch from VIA_ROOT to VIA_ADMIN

    In the future PolicyKit will be able to be built such that VIA_ADMIN
    either means 1) ask for root password; or 2) ask for a user in the
    'wheel' group to authenticate. Right now it's only the former.

 doc/TODO                               |    4 ++-
 doc/spec/polkit-spec-configuration.xml |   16 +++++-----
 polkit-grant/polkit-grant-helper.c     |   43
 +++++++++++++++---------------
 polkit-grant/polkit-grant.h            |    2 +-
 polkit/polkit-result.c                 |    6 ++--
 polkit/polkit-result.h                 |   45
 ++++++++++++++++++-------------
 tools/polkit-grant.c                   |   26 +++++++++---------
 7 files changed, 76 insertions(+), 66 deletions(-)

commit 074949c084e4bdb92a6a0d23329512d2c07112d3
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 24 14:47:09 2007 -0400

    update TODO

 doc/TODO |   53 ++++++++++++++++++++++++++++++++++++++++++++---------
 1 files changed, 44 insertions(+), 9 deletions(-)

commit 46773df61c984813aece7d06e9a9fe5cc27476a9
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jul 24 13:29:33 2007 -0400

    document the /etc/PolicyKit/PolicyKit.conf file with a manual page

    Also add a man page for polkit-list-actions(1).

 doc/man/Makefile.am                    |    2 +-
 doc/man/PolicyKit.8.in                 |    5 -
 doc/man/PolicyKit.conf.5.in            |  198
 ++++++++++++++++++++++++++++++++
 doc/man/polkit-check-caller.1.in       |    5 +-
 doc/man/polkit-check-session.1.in      |    5 +-
 doc/man/polkit-list-actions.1.in       |   44 +++++++
 doc/spec/polkit-spec-configuration.xml |   14 ++-
 7 files changed, 256 insertions(+), 17 deletions(-)

commit 600bca82cfeebdcde832d330a2c896c18026bf89
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 23 22:22:38 2007 -0400

    add support for an /etc/PolicyKit/PolicyKit.conf config file

    With this, system administrators can override policy. Partial support,
    more to come (including manual pages and documentation) later.

 data/Makefile.am                     |   19 +-
 polkit-dbus/Makefile.am              |    2 +-
 polkit-grant/Makefile.am             |    7 +-
 polkit-grant/polkit-grant-database.c |  303 -------------------
 polkit-grant/polkit-grant-database.h |   41 ---
 polkit-grant/polkit-grant-helper.c   |    2 +-
 polkit/Makefile.am                   |   15 +-
 polkit/polkit-config.c               |  536
 ++++++++++++++++++++++++++++++++++
 polkit/polkit-config.h               |   60 ++++
 polkit/polkit-context.c              |  200 ++++---------
 polkit/polkit-grant-database.c       |  307 +++++++++++++++++++
 polkit/polkit-grant-database.h       |   41 +++
 12 files changed, 1037 insertions(+), 496 deletions(-)

commit 42a6a076f7b04522bcfa51c74f6e7f5705ea5009
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Jul 23 22:21:24 2007 -0400

    get proper pid and SELinux context

 configure.in              |   41
 +++++++++++++++++++++++++++++++++++++++++
 polkit-dbus/polkit-dbus.c |   38 +++++++++++++++++++++++++++++++-------
 2 files changed, 72 insertions(+), 7 deletions(-)

commit b22ebaba2a6c077a7f09bd6567177197b63fff11
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Jul 12 15:12:30 2007 -0400

    replace configuration reload mechanism

    Instead of asking the user of libpolkit to provide a huge file
    monitoring abstraction we simply ask for a simple interface for
    watching file descriptors and use inotify (on Linux) to watch a file,
    /var/lib/PolicyKit/reload. We provide a new tool,
    polkit-reload-config, that simply touches this file.

 doc/man/Makefile.am               |    2 +-
 doc/man/polkit-reload-config.1.in |   36 ++++++++
 polkit/Makefile.am                |    7 ++
 polkit/polkit-context.c           |  168
 +++++++++++++++++++++---------------
 polkit/polkit-context.h           |  161
 ++++++++++++++++++-----------------
 tools/Makefile.am                 |   12 +++
 tools/polkit-reload-config.in     |    2 +
 7 files changed, 240 insertions(+), 148 deletions(-)

commit 608e8745e32a95b21475a0077b7db03d7a44fd8b
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Jul 12 13:49:08 2007 -0400

    remove the notion of modules

 Makefile.am                                     |    2 +-
 configure.in                                    |    6 -
 doc/man/Makefile.am                             |    5 +-
 doc/man/polkit-module-allow-all.8.in            |   51 --
 doc/man/polkit-module-builtins.8.in             |   55 --
 doc/man/polkit-module-default.8.in              |   39 --
 doc/man/polkit-module-deny-all.8.in             |   50 --
 doc/man/polkit-module-run-program.8.in          |  197 -------
 doc/man/polkit-policy-file-validate.1.in        |    2 +-
 modules/Makefile.am                             |    5 -
 modules/PolicyKit.conf                          |    6 -
 modules/allow-all/Makefile.am                   |   25 -
 modules/allow-all/polkit-module-allow-all.c     |   82 ---
 modules/default/Makefile.am                     |   25 -
 modules/default/polkit-module-default.c         |  102 ----
 modules/deny-all/Makefile.am                    |   25 -
 modules/deny-all/polkit-module-deny-all.c       |   82 ---
 modules/grant/Makefile.am                       |   25 -
 modules/grant/polkit-module-grant.c             |  208 -------
 modules/run-program/Makefile.am                 |   25 -
 modules/run-program/polkit-module-run-program.c |  329 -----------
 policy/Makefile.am                              |    2 +-
 polkit/Makefile.am                              |    6 +-
 polkit/polkit-context.c                         |  160 +-----
 polkit/polkit-module.c                          |  683
 -----------------------
 polkit/polkit-module.h                          |  163 ------
 polkit/polkit.h                                 |    1 -
 27 files changed, 17 insertions(+), 2344 deletions(-)

commit 6696140d5fdc8b13bcb17a2d7e0d7a73b48a18ad
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 01:53:26 2007 -0400

    post-release version bump

 configure.in |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit f126398c4129ffc6597716ca6451a8ed703ec91b
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 01:31:38 2007 -0400

    update NEWS

 NEWS |   16 +++++++++++++---
 1 files changed, 13 insertions(+), 3 deletions(-)

commit 707402c1b90ceffd9dac37ace42d94c09c2e85cf
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 01:10:47 2007 -0400

    add some more TODO items

 doc/TODO |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 5697a8dba0ff4b7cea9bd64d7abaaad9a96e834d
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 01:04:17 2007 -0400

    update HACKING and TODO

 HACKING  |   80
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 doc/TODO |    5 +++-
 2 files changed, 83 insertions(+), 2 deletions(-)

commit 4a9962c7748c6f3cdecabcd53e87fbb2ddcb7d2f
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 01:01:30 2007 -0400

    update TODO

 doc/TODO |   32 +++++++++++++++++++++++++++++++-
 1 files changed, 31 insertions(+), 1 deletions(-)

commit b74cc6ed8830200f38119ca0dfd1e5c26c557a89
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Jun 20 00:49:13 2007 -0400

    add the spec

 doc/spec/Makefile.am                   |    4 +-
 doc/spec/polkit-spec-configuration.xml |  197 ++++++++++++++++++++++++++
 doc/spec/polkit-spec-introduction.xml  |  119 ++++++++++++++++-
 doc/spec/polkit-spec-model.xml         |  238
 ++++++++++++++++++++++++++++++++
 doc/spec/polkit-spec.xml.in.in         |    2 +
 5 files changed, 558 insertions(+), 2 deletions(-)

commit 8afbda8b8ea35fa5992541d420c37c1d6ca98724
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 21:50:48 2007 -0400

    fix small typo so _keep_always granting works again

 polkit-grant/polkit-grant-database.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 8d3b0c22751514312ad4f4f9c85c3070ebcef54e
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 21:48:42 2007 -0400

    make .policy files live in /usr/share, not /etc

 polkit/polkit-context.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 1d16acb6935a8188a98699d431e1e9ec327bdf9d
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 20:12:00 2007 -0400

    build fixes

 modules/Makefile.am                             |    3 +-
 modules/allow-all/polkit-module-allow-all.c     |   22 +++++++--------
 modules/deny-all/polkit-module-deny-all.c       |   22 +++++++--------
 modules/run-program/polkit-module-run-program.c |   32
 +++--------------------
 4 files changed, 25 insertions(+), 54 deletions(-)

commit 2ec20531b4976576f650acee5ed8f5fa3a3a9541
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 19:59:54 2007 -0400

    move all grant writing/checking into a separate private library

 modules/grant/Makefile.am            |    8 +-
 modules/grant/polkit-module-grant.c  |    7 +-
 polkit-grant/Makefile.am             |    8 +-
 polkit-grant/polkit-grant-database.c |  303
 ++++++++++++++++++++++++++++++++++
 polkit-grant/polkit-grant-database.h |   41 +++++
 polkit-grant/polkit-grant-helper.c   |   31 ++++-
 6 files changed, 385 insertions(+), 13 deletions(-)

commit 874fa499deb2a7457d3f369d09f9e3d2288301b0
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 16:41:49 2007 -0400

    remove the distinction for local vs. remote users

    Again, we punt this to the applications/mechanisms - they know better.

 polkit-grant/polkit-grant.c       |    4 +-
 polkit/polkit-policy-default.c    |  113 ++++++++---------------------
 polkit/polkit-policy-default.h    |    6 +-
 polkit/polkit-policy-file-entry.c |  110 +++--------------------------
 polkit/polkit-policy-file.c       |  140
 ++++++------------------------------
 tools/polkit-list-actions.c       |   31 +++------
 6 files changed, 79 insertions(+), 325 deletions(-)

commit 169c130d4e517371c64d2c2832d323592d38ea7b
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Jun 19 15:41:55 2007 -0400

    rip out the notion of Resources

    It makes things a _lot more_ complicated having to deal with resources
    and there's a much nicer way to deal with it: Punt it to the apps:

    It's much more natural for the application to have a notion about
    about what resources are "trusted" (and e.g. requires lesser
    privileges) and what resources aren't.

    Consider dial-up networking; here the privileged application that
    performs the dial-up operation consults a list (maintained by the
    system administrator) of allowed numbers to dial. If the unprivileged
    networking UI applet that requests a number to be dialed is on the
    list it uses the PolicyKit action 'nm-dialup-trusted-location', if it
    isn't then it uses the PolicyKit action
    'nm-dialup-untrusted-location'.

 doc/api/polkit/polkit-docs.xml          |    1 -
 modules/Makefile.am                     |    3 +-
 modules/default/polkit-module-default.c |   38 ++---
 modules/grant/Makefile.am               |    6 +-
 modules/grant/polkit-module-grant.c     |   71 ++++++----
 polkit-dbus/polkit-dbus.c               |  131 +++++++++++++++++
 polkit-dbus/polkit-dbus.h               |    2 +
 polkit-grant/Makefile.am                |    1 +
 polkit-grant/polkit-grant-helper.c      |   70 ++++++----
 polkit-grant/polkit-grant.c             |   47 +++----
 polkit-grant/polkit-grant.h             |    4 +-
 polkit/Makefile.am                      |    2 -
 polkit/polkit-caller.c                  |    2 -
 polkit/polkit-context.c                 |  111 +++------------
 polkit/polkit-context.h                 |   37 +----
 polkit/polkit-module.c                  |  117 ++++------------
 polkit/polkit-module.h                  |   94 ++++---------
 polkit/polkit-policy-default.c          |   28 ++--
 polkit/polkit-policy-default.h          |   16 +--
 polkit/polkit-policy-file-entry.c       |    2 +-
 polkit/polkit-policy-file-entry.h       |    3 -
 polkit/polkit-resource.c                |  232
 -------------------------------
 polkit/polkit-resource.h                |   52 -------
 polkit/polkit.h                         |    1 -
 tools/polkit-check-caller.c             |   27 +---
 tools/polkit-check-session.c            |   26 +---
 tools/polkit-grant.c                    |   23 +---
 27 files changed, 372 insertions(+), 775 deletions(-)

commit b9cf5bca49a2a1fc68002c2a315d94a3adaed51e
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 22 21:13:17 2007 -0400

    switch to XML for policy definition files and introduce descriptions

    Descriptions will be subject to i18n/l10n efforts at some point.

    Also add a new tool polkit-list-actions.

 configure.in                        |   14 ++
 policy/polkit-example-action.policy |   34 ++-
 polkit-grant/polkit-grant.c         |   13 +-
 polkit-grant/polkit-grant.h         |    2 +
 polkit/Makefile.am                  |    2 +-
 polkit/polkit-context.c             |   27 +++-
 polkit/polkit-context.h             |   31 ++--
 polkit/polkit-error.c               |    6 +-
 polkit/polkit-policy-cache.c        |   40 +++-
 polkit/polkit-policy-cache.h        |   27 ++-
 polkit/polkit-policy-default.c      |  155 ++++++-------
 polkit/polkit-policy-default.h      |   17 +-
 polkit/polkit-policy-file-entry.c   |  187 +++++++++++++++-
 polkit/polkit-policy-file-entry.h   |   11 +-
 polkit/polkit-policy-file.c         |  414
 ++++++++++++++++++++++++++++++----
 polkit/polkit-policy-file.h         |    4 +-
 tools/Makefile.am                   |    5 +-
 tools/polkit-list-actions.c         |  143 ++++++++++++
 tools/polkit-policy-file-validate.c |    2 +-
 19 files changed, 931 insertions(+), 203 deletions(-)

commit 5cfae846d1c2b0cbef3dcebc909e2846bcc3cc4b
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Apr 17 02:13:02 2007 -0400

    also remember to do s/libpolkit/polkit/ on the pkg-config files

 data/polkit-dbus.pc.in  |    4 ++--
 data/polkit-grant.pc.in |    4 ++--
 data/polkit.pc.in       |    2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 36c1b7725fcb2339fcf9a87f5e5c984ef5be17cb
Author: David Zeuthen <davidz@redhat.com>
Date:   Tue Apr 17 01:41:09 2007 -0400

    rename libpolkit to polkit

    It's more consistent and, uhm, easier to type.

 Makefile.am                                      |   12 +-
 configure.in                                     |   29 +-
 data/Makefile.am                                 |   14 +
 data/polkit-dbus.pc.in                           |   11 +
 data/polkit-grant.pc.in                          |   11 +
 data/polkit.in                                   |    6 +
 data/polkit.pc.in                                |   11 +
 doc/api/Makefile.am                              |    2 +-
 doc/api/libpolkit-dbus/Makefile.am               |   67 --
 doc/api/libpolkit-dbus/libpolkit-dbus-docs.xml   |  109 ---
 doc/api/libpolkit-dbus/version.xml.in            |    1 -
 doc/api/libpolkit-grant/Makefile.am              |   67 --
 doc/api/libpolkit-grant/libpolkit-grant-docs.xml |  109 ---
 doc/api/libpolkit-grant/version.xml.in           |    1 -
 doc/api/libpolkit/Makefile.am                    |   67 --
 doc/api/libpolkit/libpolkit-docs.xml             |  124 ----
 doc/api/libpolkit/version.xml.in                 |    1 -
 doc/api/polkit-dbus/Makefile.am                  |   67 ++
 doc/api/polkit-dbus/polkit-dbus-docs.xml         |  109 +++
 doc/api/polkit-dbus/version.xml.in               |    1 +
 doc/api/polkit-grant/Makefile.am                 |   67 ++
 doc/api/polkit-grant/polkit-grant-docs.xml       |  109 +++
 doc/api/polkit-grant/version.xml.in              |    1 +
 doc/api/polkit/Makefile.am                       |   67 ++
 doc/api/polkit/polkit-docs.xml                   |  122 ++++
 doc/api/polkit/version.xml.in                    |    1 +
 libpolkit-dbus.pc.in                             |   11 -
 libpolkit-dbus/Makefile.am                       |   31 -
 libpolkit-dbus/libpolkit-dbus.c                  |  540 ---------------
 libpolkit-dbus/libpolkit-dbus.h                  |   41 --
 libpolkit-grant.pc.in                            |   11 -
 libpolkit-grant/Makefile.am                      |   54 --
 libpolkit-grant/libpolkit-grant.c                |  465 -------------
 libpolkit-grant/libpolkit-grant.h                |  344 ----------
 libpolkit-grant/polkit-grant-helper.c            |  514 ---------------
 libpolkit.pc.in                                  |   11 -
 libpolkit/.gitignore                             |    9 -
 libpolkit/Makefile.am                            |   62 --
 libpolkit/libpolkit-action.c                     |  186 ------
 libpolkit/libpolkit-action.h                     |   49 --
 libpolkit/libpolkit-caller.c                     |  345 ----------
 libpolkit/libpolkit-caller.h                     |   57 --
 libpolkit/libpolkit-context.c                    |  767
 ----------------------
 libpolkit/libpolkit-context.h                    |  186 ------
 libpolkit/libpolkit-debug.c                      |   81 ---
 libpolkit/libpolkit-debug.h                      |   33 -
 libpolkit/libpolkit-error.c                      |  140 ----
 libpolkit/libpolkit-error.h                      |   54 --
 libpolkit/libpolkit-module.c                     |  748
 ---------------------
 libpolkit/libpolkit-module.h                     |  207 ------
 libpolkit/libpolkit-policy-cache.c               |  248 -------
 libpolkit/libpolkit-policy-cache.h               |   50 --
 libpolkit/libpolkit-policy-default.c             |  322 ---------
 libpolkit/libpolkit-policy-default.h             |   60 --
 libpolkit/libpolkit-policy-file-entry.c          |  171 -----
 libpolkit/libpolkit-policy-file-entry.h          |   49 --
 libpolkit/libpolkit-policy-file.c                |  218 ------
 libpolkit/libpolkit-policy-file.h                |   60 --
 libpolkit/libpolkit-resource.c                   |  232 -------
 libpolkit/libpolkit-resource.h                   |   52 --
 libpolkit/libpolkit-result.c                     |  116 ----
 libpolkit/libpolkit-result.h                     |   84 ---
 libpolkit/libpolkit-seat.c                       |  179 -----
 libpolkit/libpolkit-seat.h                       |   49 --
 libpolkit/libpolkit-session.c                    |  394 -----------
 libpolkit/libpolkit-session.h                    |   60 --
 libpolkit/libpolkit-types.h                      |   56 --
 libpolkit/libpolkit-utils.c                      |  153 -----
 libpolkit/libpolkit-utils.h                      |   37 -
 libpolkit/libpolkit.h                            |   48 --
 modules/allow-all/Makefile.am                    |    2 +-
 modules/allow-all/polkit-module-allow-all.c      |   20 +-
 modules/default/Makefile.am                      |    2 +-
 modules/default/polkit-module-default.c          |   36 +-
 modules/deny-all/Makefile.am                     |    2 +-
 modules/deny-all/polkit-module-deny-all.c        |   20 +-
 modules/grant/Makefile.am                        |    2 +-
 modules/grant/polkit-module-grant.c              |   42 +-
 modules/run-program/Makefile.am                  |    2 +-
 modules/run-program/polkit-module-run-program.c  |   60 +-
 polkit-dbus/Makefile.am                          |   31 +
 polkit-dbus/polkit-dbus.c                        |  540 +++++++++++++++
 polkit-dbus/polkit-dbus.h                        |   41 ++
 polkit-grant/Makefile.am                         |   54 ++
 polkit-grant/polkit-grant-helper.c               |  514 +++++++++++++++
 polkit-grant/polkit-grant.c                      |  465 +++++++++++++
 polkit-grant/polkit-grant.h                      |  344 ++++++++++
 polkit.in                                        |    6 -
 polkit/.gitignore                                |    9 +
 polkit/Makefile.am                               |   61 ++
 polkit/polkit-action.c                           |  186 ++++++
 polkit/polkit-action.h                           |   49 ++
 polkit/polkit-caller.c                           |  345 ++++++++++
 polkit/polkit-caller.h                           |   57 ++
 polkit/polkit-context.c                          |  767
 ++++++++++++++++++++++
 polkit/polkit-context.h                          |  186 ++++++
 polkit/polkit-debug.c                            |   81 +++
 polkit/polkit-debug.h                            |   33 +
 polkit/polkit-error.c                            |  140 ++++
 polkit/polkit-error.h                            |   54 ++
 polkit/polkit-module.c                           |  748
 +++++++++++++++++++++
 polkit/polkit-module.h                           |  207 ++++++
 polkit/polkit-policy-cache.c                     |  248 +++++++
 polkit/polkit-policy-cache.h                     |   50 ++
 polkit/polkit-policy-default.c                   |  322 +++++++++
 polkit/polkit-policy-default.h                   |   60 ++
 polkit/polkit-policy-file-entry.c                |  171 +++++
 polkit/polkit-policy-file-entry.h                |   49 ++
 polkit/polkit-policy-file.c                      |  218 ++++++
 polkit/polkit-policy-file.h                      |   60 ++
 polkit/polkit-resource.c                         |  232 +++++++
 polkit/polkit-resource.h                         |   52 ++
 polkit/polkit-result.c                           |  116 ++++
 polkit/polkit-result.h                           |   84 +++
 polkit/polkit-seat.c                             |  179 +++++
 polkit/polkit-seat.h                             |   49 ++
 polkit/polkit-session.c                          |  394 +++++++++++
 polkit/polkit-session.h                          |   60 ++
 polkit/polkit-types.h                            |   56 ++
 polkit/polkit-utils.c                            |  153 +++++
 polkit/polkit-utils.h                            |   37 +
 polkit/polkit.h                                  |   48 ++
 tools/Makefile.am                                |    8 +-
 tools/polkit-check-caller.c                      |   24 +-
 tools/polkit-check-session.c                     |   26 +-
 tools/polkit-grant.c                             |   84 ++--
 tools/polkit-policy-file-validate.c              |    6 +-
 127 files changed, 8333 insertions(+), 8329 deletions(-)

commit 9e492bfb815dd352c23578a62caf6cd9ea0b112b
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 23:37:29 2007 -0400

    add some validation to public facing functions

 libpolkit/libpolkit-context.c |   25 +++++++++++++++++++++++--
 1 files changed, 23 insertions(+), 2 deletions(-)

commit 81401e166e69287f33f568ca06a959662b01d068
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 19:41:00 2007 -0400

    remove misguided action parameters

    This feature was introduced with

     commit 02a4c5101ca4751963f76a0e016d3308389dc2a5
     http://gitweb.freedesktop.org/?p=PolicyKit.git;a=commit;h=02a4c5101ca4751963f76a0e016d3308389dc2a5

    It makes things a lot harder for privilege granting if a feature like
    action parameters are present. Thinking about it, they're not really
    necessary; the parameters should just be encoded in the resource name;
    e.g. with the example given in the commit

    > This is useful for letting mechanisms convey information which
    may be
    > useful in making a decision whether an action is OK. For example,
    > NetworkManager could use this to provide the phone-number parameter
    > with a hypothetical "nm-dialup" action. Then a site or vendor can
    > provide insert
    >
    >  mandatory polkit-run-program.so \
    >     program="/usr/lib/check-dialup-number.sh" privilege="nm-dialup"
    >
    > into /etc/PolicyKit/PolicyKit.conf and have said program check
    >
    >  $POLKIT_ACTION_PARAM_PHONE_NUMBER
    >
    > in that program.

    is broken; the right thing here is for a hypothetical NetworkManager
    to pass the dial up connection details as the resource

     resource.type = "NetworkManager"
     resource.id =
     "/org/freedesktop/NM/DialUpConnection/number=555-HOT-CHICKS"

    in a well-defined format etc. etc.

 doc/man/polkit-check-caller.1.in                |    3 -
 doc/man/polkit-check-session.1.in               |    3 -
 doc/man/polkit-module-run-program.8.in          |    5 --
 libpolkit/libpolkit-action.c                    |   73
 -----------------------
 libpolkit/libpolkit-action.h                    |   18 ------
 modules/run-program/polkit-module-run-program.c |   25 --------
 tools/polkit-check-caller.c                     |   30 ---------
 tools/polkit-check-session.c                    |   30 ---------
 8 files changed, 0 insertions(+), 187 deletions(-)

commit 845b572bf8e4c6391256cc643446e4eeb24ad5b0
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 18:55:27 2007 -0400

    add the PAM configuration file

 polkit.in |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit fe9cdb0e30d24993f7e6282f5efb6687f47bfce2
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 18:54:35 2007 -0400

    add pkg-config files for the two new libraries

 libpolkit-dbus.pc.in  |   11 +++++++++++
 libpolkit-grant.pc.in |   11 +++++++++++
 2 files changed, 22 insertions(+), 0 deletions(-)

commit 982123fb620cc79fbddc332051bfd421f4dff015
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 18:53:42 2007 -0400

    add the correct version files for docs

 doc/api/libpolkit-dbus/version.xml     |    1 -
 doc/api/libpolkit-dbus/version.xml.in  |    1 +
 doc/api/libpolkit-grant/version.xml    |    1 -
 doc/api/libpolkit-grant/version.xml.in |    1 +
 4 files changed, 2 insertions(+), 2 deletions(-)

commit a0570c50359b7044c38c46fd0527bb8bcb45e271
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 15 18:51:19 2007 -0400

    add grant functionality + lots of other changes

     - Split libpolkit into three libraries
       - libpolkit : to be used only by mechanisms and modules
       - libpolkit-dbus : utility library for libpolkit to get caller,
       session
                          etc. info from the bus and ConsoleKit
       - libpolkit-grant : client side library for obtaining privileges;
       uses
                           a setgid helper internally

     - grant functionality
       - a helper library, libpolkit-grant, to gain privileges
         - includes a setgid $POLKIT_GROUP helper to write granted
         privileges
       - a PK module, to read and interpret granted privileges
       - a cmdline app, polkit-grant, using said library

     - Other changes
       - so it turns out that sizeof(bool) != sizeof(gboolean),
       sizeof(dbus_bool_t)
         This blows so define our own polkit_bool_t type
       - add some validation routines

    The grant functionality, especially the setgid helper needs thorough
    security review before we can release it.

 Makefile.am                                      |   11 +-
 configure.in                                     |  196 ++++++++
 doc/api/Makefile.am                              |    2 +-
 doc/api/libpolkit-dbus/Makefile.am               |   67 +++
 doc/api/libpolkit-dbus/libpolkit-dbus-docs.xml   |  109 +++++
 doc/api/libpolkit-dbus/version.xml               |    1 +
 doc/api/libpolkit-grant/Makefile.am              |   67 +++
 doc/api/libpolkit-grant/libpolkit-grant-docs.xml |  109 +++++
 doc/api/libpolkit-grant/version.xml              |    1 +
 doc/api/libpolkit/libpolkit-docs.xml             |    3 +
 libpolkit-dbus/Makefile.am                       |   31 ++
 libpolkit-dbus/libpolkit-dbus.c                  |  540
 ++++++++++++++++++++++
 libpolkit-dbus/libpolkit-dbus.h                  |   41 ++
 libpolkit-grant/Makefile.am                      |   54 +++
 libpolkit-grant/libpolkit-grant.c                |  465
 +++++++++++++++++++
 libpolkit-grant/libpolkit-grant.h                |  344 ++++++++++++++
 libpolkit-grant/polkit-grant-helper.c            |  514
 ++++++++++++++++++++
 libpolkit.pc.in                                  |    2 +-
 libpolkit/Makefile.am                            |    8 +-
 libpolkit/libpolkit-action.c                     |   26 +-
 libpolkit/libpolkit-action.h                     |   11 +-
 libpolkit/libpolkit-caller.c                     |  220 +++-------
 libpolkit/libpolkit-caller.h                     |   34 +-
 libpolkit/libpolkit-context.c                    |   26 +-
 libpolkit/libpolkit-context.h                    |    8 +-
 libpolkit/libpolkit-debug.c                      |   12 +-
 libpolkit/libpolkit-error.c                      |    6 +-
 libpolkit/libpolkit-error.h                      |    4 +
 libpolkit/libpolkit-module.c                     |   70 ++--
 libpolkit/libpolkit-module.h                     |   18 +-
 libpolkit/libpolkit-policy-cache.h               |    4 +
 libpolkit/libpolkit-policy-default.c             |   22 +-
 libpolkit/libpolkit-policy-default.h             |   16 +-
 libpolkit/libpolkit-policy-file-entry.h          |    4 +
 libpolkit/libpolkit-policy-file.h                |    4 +
 libpolkit/libpolkit-resource.c                   |   40 ++-
 libpolkit/libpolkit-resource.h                   |   16 +-
 libpolkit/libpolkit-result.c                     |    6 +-
 libpolkit/libpolkit-result.h                     |   23 +-
 libpolkit/libpolkit-seat.c                       |   33 ++-
 libpolkit/libpolkit-seat.h                       |   19 +-
 libpolkit/libpolkit-session.c                    |  339 +++-----------
 libpolkit/libpolkit-session.h                    |   38 +-
 libpolkit/libpolkit-types.h                      |   56 +++
 libpolkit/libpolkit-utils.c                      |  153 ++++++
 libpolkit/libpolkit-utils.h                      |   37 ++
 libpolkit/libpolkit.h                            |   15 +
 modules/Makefile.am                              |    2 +-
 modules/PolicyKit.conf                           |    1 +
 modules/allow-all/polkit-module-allow-all.c      |   17 +-
 modules/default/polkit-module-default.c          |   17 +-
 modules/deny-all/polkit-module-deny-all.c        |   17 +-
 modules/grant/Makefile.am                        |   25 +
 modules/grant/polkit-module-grant.c              |  194 ++++++++
 modules/run-program/polkit-module-run-program.c  |   70 ++--
 tools/Makefile.am                                |    9 +-
 tools/polkit-check-caller.c                      |    2 +-
 tools/polkit-check-session.c                     |    2 +-
 tools/polkit-grant.c                             |  425 +++++++++++++++++
 tools/polkit-policy-file-validate.c              |    2 +-
 60 files changed, 3950 insertions(+), 658 deletions(-)

commit 192f04cef946c0ebe5f90c8dbecc933b6ac3c197
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Apr 9 18:38:20 2007 -0400

    remove all usage of glib from the header files

    This paves the way for getting rid of a glib dependency; when and if
    that happens is to be determined; right now it just doesn't make a lot
    of sense to reimplement GKeyFile, GSList, GHashTable, g_spawn_sync and
    other useful routines. But it might make sense if we want to get the
    message bus daemon to link with libpolkit so you e.g. can say

     <policy polkit="acme-frobnicate">
       <allow send_interface="com.acme.Frobnicator"
     </policy>

    to allow a caller on the system message bus to access that interface
    if, and only if, he can do the "acme-frobnicate" action according to
    PolicyKit.

 libpolkit/libpolkit-action.c                    |    6 +-
 libpolkit/libpolkit-action.h                    |   17 ++---
 libpolkit/libpolkit-caller.c                    |   10 +-
 libpolkit/libpolkit-caller.h                    |   14 ++--
 libpolkit/libpolkit-context.c                   |   39 ++++++----
 libpolkit/libpolkit-context.h                   |   32 ++++-----
 libpolkit/libpolkit-debug.c                     |   10 ++-
 libpolkit/libpolkit-debug.h                     |    5 -
 libpolkit/libpolkit-error.c                     |   91
 +++++++++++++++++++++--
 libpolkit/libpolkit-error.h                     |   27 +++----
 libpolkit/libpolkit-module.c                    |   78
 ++++++++++----------
 libpolkit/libpolkit-module.h                    |   20 ++---
 libpolkit/libpolkit-policy-cache.c              |   32 ++++----
 libpolkit/libpolkit-policy-cache.h              |    8 +--
 libpolkit/libpolkit-policy-default.c            |   57 +++++++-------
 libpolkit/libpolkit-policy-default.h            |    9 +--
 libpolkit/libpolkit-policy-file-entry.c         |   21 ++----
 libpolkit/libpolkit-policy-file-entry.h         |    6 --
 libpolkit/libpolkit-policy-file.c               |   68 +++++++++++------
 libpolkit/libpolkit-policy-file.h               |   28 +++++--
 libpolkit/libpolkit-resource.c                  |    4 +-
 libpolkit/libpolkit-resource.h                  |    9 +--
 libpolkit/libpolkit-result.c                    |    6 +-
 libpolkit/libpolkit-result.h                    |    4 +-
 libpolkit/libpolkit-seat.c                      |    8 +-
 libpolkit/libpolkit-seat.h                      |    7 +-
 libpolkit/libpolkit-session.c                   |   28 ++++----
 libpolkit/libpolkit-session.h                   |   20 ++---
 modules/allow-all/Makefile.am                   |    4 +-
 modules/allow-all/polkit-module-allow-all.c     |   23 ++----
 modules/default/Makefile.am                     |    4 +-
 modules/default/polkit-module-default.c         |   23 ++----
 modules/deny-all/Makefile.am                    |    4 +-
 modules/deny-all/polkit-module-deny-all.c       |   23 ++----
 modules/run-program/polkit-module-run-program.c |   80
 +++++++++-----------
 tools/Makefile.am                               |    2 +-
 tools/polkit-check-caller.c                     |   12 ++-
 tools/polkit-check-session.c                    |   12 ++-
 tools/polkit-policy-file-validate.c             |   10 ++-
 39 files changed, 451 insertions(+), 410 deletions(-)

commit 02a4c5101ca4751963f76a0e016d3308389dc2a5
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Apr 9 15:20:04 2007 -0400

    associate parameters (key/value pairs) with the Action class

    This is useful for letting mechanisms convey information which may be
    useful in making a decision whether an action is OK. For example,
    NetworkManager could use this to provide the phone-number parameter
    with a hypothetical "nm-dialup" action. Then a site or vendor can
    provide insert

     mandatory polkit-run-program.so
     program="/usr/lib/check-dialup-number.sh" privilege="nm-dialup"

    into /etc/PolicyKit/PolicyKit.conf and have said program check

     $POLKIT_ACTION_PARAM_PHONE_NUMBER

    in that program.

 doc/man/polkit-check-caller.1.in                |   15 +++--
 doc/man/polkit-check-session.1.in               |   15 +++--
 doc/man/polkit-module-run-program.8.in          |    5 ++
 libpolkit/libpolkit-action.c                    |   80
 +++++++++++++++++++++++
 libpolkit/libpolkit-action.h                    |   26 ++++++-
 modules/run-program/polkit-module-run-program.c |   25 +++++++
 tools/polkit-check-caller.c                     |   38 ++++++++++-
 tools/polkit-check-session.c                    |   36 +++++++++-
 8 files changed, 217 insertions(+), 23 deletions(-)

commit 7222fca16e15c86d17bbca4e3bc56bb0a807cbbb
Author: David Zeuthen <davidz@redhat.com>
Date:   Mon Apr 9 15:16:10 2007 -0400

    remember to set session's ConsoleKit object path

 libpolkit/libpolkit-session.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit ee531eefb45fd362c8aa3e8cb395549dda50f446
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 19:38:02 2007 -0400

    policy files now have the .policy extension, not .priv

 libpolkit/libpolkit-context.c      |    4 ++--
 libpolkit/libpolkit-policy-cache.c |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit ee660301bbeed46cc49eb06cf6853a28fcbb4812
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 19:18:23 2007 -0400

    no need to reference polkit-module-default twice in a man page

 doc/man/polkit-module-run-program.8.in |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 8b9991aead36449824b700ac596241eb6095450d
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 19:12:31 2007 -0400

    minor fixes to the PolicyKit manual page

 doc/man/PolicyKit.8.in |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit ce556c72b4109d4bd882dff089ddb377f2cb2129
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 19:06:59 2007 -0400

    mass renaming of classes

     Privilege -> Action
     PrivilegeFile -> PolicyFile
     PrivilegeFileEntry -> PolicyFileEntry
     PrivilegeCache -> PolicyCache

    Hopefully it makes a bit more sense now.

 Makefile.am                                     |    2 +-
 configure.in                                    |    2 +-
 doc/api/libpolkit/libpolkit-docs.xml            |   10 +-
 doc/man/Makefile.am                             |    2 +-
 doc/man/polkit-check-caller.1.in                |    4 +-
 doc/man/polkit-check-session.1.in               |    4 +-
 doc/man/polkit-module-allow-all.8.in            |   10 +-
 doc/man/polkit-module-builtins.8.in             |   10 +-
 doc/man/polkit-module-default.8.in              |    6 +-
 doc/man/polkit-module-deny-all.8.in             |   10 +-
 doc/man/polkit-module-run-program.8.in          |   18 +-
 doc/man/polkit-policy-file-validate.1.in        |   53 ++++
 doc/man/polkit-privilege-file-validate.1.in     |   53 ----
 libpolkit/Makefile.am                           |   42 ++--
 libpolkit/libpolkit-action.c                    |  159 +++++++++++
 libpolkit/libpolkit-action.h                    |   47 ++++
 libpolkit/libpolkit-context.c                   |  142 +++++-----
 libpolkit/libpolkit-context.h                   |   10 +-
 libpolkit/libpolkit-error.h                     |    4 +-
 libpolkit/libpolkit-module.c                    |   48 ++--
 libpolkit/libpolkit-module.h                    |   14 +-
 libpolkit/libpolkit-policy-cache.c              |  246 +++++++++++++++++
 libpolkit/libpolkit-policy-cache.h              |   50 ++++
 libpolkit/libpolkit-policy-default.c            |  323
 ++++++++++++++++++++++
 libpolkit/libpolkit-policy-default.h            |   61 +++++
 libpolkit/libpolkit-policy-file-entry.c         |  178 +++++++++++++
 libpolkit/libpolkit-policy-file-entry.h         |   51 ++++
 libpolkit/libpolkit-policy-file.c               |  200 ++++++++++++++
 libpolkit/libpolkit-policy-file.h               |   46 ++++
 libpolkit/libpolkit-privilege-cache.c           |  247 -----------------
 libpolkit/libpolkit-privilege-cache.h           |   50 ----
 libpolkit/libpolkit-privilege-default.c         |  325
 -----------------------
 libpolkit/libpolkit-privilege-default.h         |   61 -----
 libpolkit/libpolkit-privilege-file-entry.c      |  178 -------------
 libpolkit/libpolkit-privilege-file-entry.h      |   51 ----
 libpolkit/libpolkit-privilege-file.c            |  200 --------------
 libpolkit/libpolkit-privilege-file.h            |   46 ----
 libpolkit/libpolkit-privilege.c                 |  160 -----------
 libpolkit/libpolkit-privilege.h                 |   47 ----
 libpolkit/libpolkit-result.c                    |    2 +-
 libpolkit/libpolkit-result.h                    |    4 +-
 modules/allow-all/polkit-module-allow-all.c     |    4 +-
 modules/default/polkit-module-default.c         |   32 ++--
 modules/deny-all/polkit-module-deny-all.c       |    4 +-
 modules/run-program/polkit-module-run-program.c |   16 +-
 policy/Makefile.am                              |   17 ++
 policy/polkit-example-action.policy             |   15 +
 privileges/Makefile.am                          |   17 --
 privileges/polkit-example-privilege.priv        |   15 -
 tools/Makefile.am                               |    6 +-
 tools/polkit-check-caller.c                     |   22 +-
 tools/polkit-check-session.c                    |   22 +-
 tools/polkit-policy-file-validate.c             |   98 +++++++
 tools/polkit-privilege-file-validate.c          |   98 -------
 54 files changed, 1769 insertions(+), 1773 deletions(-)

commit 8035e5d1f3aaf27b059cc49f16790c1a0d002674
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 17:26:29 2007 -0400

    fix up Makefile.am

 Makefile.am |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit d140ff6aefca053cb796a7b05e97ecec9e038067
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 17:25:31 2007 -0400

    generate and dist ChangeLog

 Makefile.am |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit e2a465d0f9a16b501754b03267d743ac20135973
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 16:49:27 2007 -0400

    add built-in options and a new module pam-polkit-run-program.so

 configure.in                                    |    1 +
 doc/man/Makefile.am                             |    2 +-
 doc/man/polkit-module-allow-all.8.in            |   22 +-
 doc/man/polkit-module-builtins.8.in             |   55 ++++
 doc/man/polkit-module-deny-all.8.in             |   24 +-
 doc/man/polkit-module-run-program.8.in          |  198 +++++++++++++
 libpolkit/libpolkit-context.c                   |   53 +++-
 libpolkit/libpolkit-module.c                    |  256 ++++++++++++++++
 libpolkit/libpolkit-module.h                    |   15 +
 modules/Makefile.am                             |    2 +-
 modules/allow-all/polkit-module-allow-all.c     |  153 +----------
 modules/deny-all/Makefile.am                    |    4 +-
 modules/deny-all/polkit-module-deny-all.c       |   92 ++++++
 modules/run-program/Makefile.am                 |   25 ++
 modules/run-program/polkit-module-run-program.c |  359
 +++++++++++++++++++++++
 15 files changed, 1063 insertions(+), 198 deletions(-)

commit 0973db30eaab0e12d48b1e1f8386960fb32e2343
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 02:13:34 2007 -0400

    stop disting ChangeLog and start disting modules/PolicyKit.conf

    Am happy to report that 'make distcheck' now works!

 Makefile.am         |   22 +---------------------
 modules/Makefile.am |    2 +-
 2 files changed, 2 insertions(+), 22 deletions(-)

commit 3638c6c15eb33ec64559dc9f075c3f82f9cbcb66
Author: David Zeuthen <davidz@redhat.com>
Date:   Sun Apr 8 02:07:42 2007 -0400

    add module loading to PolicyKit

    This paves the way for writing

     1. A module that tracks temporary (look in /var/run) and permanent
     (look
        in /var/lib) privilege grants
     2. A D-Bus service to authenticate a client to obtain to a privilege
        grant and then writing the grant in temporary or permanent storage

    Also, this feature lets people very easily lock down the system; just
    edit /etc/PolicyKit/PolicyKit.conf; add pam-module-deny-all /
    -allow-all
    stanzas with various privilege=<regexp> and user=<username> options.

 Makefile.am                                 |    2 +-
 configure.in                                |    4 +
 doc/api/libpolkit/libpolkit-docs.xml        |    2 +-
 doc/man/Makefile.am                         |    4 +-
 doc/man/PolicyKit.8.in                      |   38 ++
 doc/man/polkit-check-caller.1.in            |    1 +
 doc/man/polkit-check-session.1.in           |    1 +
 doc/man/polkit-module-allow-all.8.in        |   61 ++++
 doc/man/polkit-module-default.8.in          |   39 +++
 doc/man/polkit-module-deny-all.8.in         |   60 ++++
 doc/man/polkit-privilege-file-validate.1.in |    1 +
 libpolkit/Makefile.am                       |   11 +-
 libpolkit/libpolkit-context.c               |  443
 ++++++++++++++++++++++++-
 libpolkit/libpolkit-context.h               |   50 +++-
 libpolkit/libpolkit-debug.c                 |   10 +
 libpolkit/libpolkit-module.c                |  490
 +++++++++++++++++++++++++++
 libpolkit/libpolkit-module.h                |  192 +++++++++++
 libpolkit/libpolkit-result.c                |    4 +-
 libpolkit/libpolkit-result.h                |    9 +-
 libpolkit/libpolkit.c                       |  219 ------------
 libpolkit/libpolkit.h                       |   46 ---
 modules/Makefile.am                         |    5 +
 modules/PolicyKit.conf                      |    5 +
 modules/allow-all/Makefile.am               |   25 ++
 modules/allow-all/polkit-module-allow-all.c |  241 +++++++++++++
 modules/default/Makefile.am                 |   25 ++
 modules/default/polkit-module-default.c     |  116 +++++++
 modules/deny-all/Makefile.am                |   25 ++
 tools/polkit-check-caller.c                 |    2 +-
 tools/polkit-check-session.c                |    2 +-
 30 files changed, 1842 insertions(+), 291 deletions(-)

commit a1b5a12bd768c2d34d33c24af1853a424b875527
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 22:09:00 2007 -0400

    watch the correct directory

 libpolkit/libpolkit-context.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 339a8b626814b74a07d9005e1ef81a2b03b99938
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 21:52:37 2007 -0400

    really ignore privilege files starting with "." this time

    Also avoid dumping all privilege file entries to debug whenever we
    populate our privilege cache.

 libpolkit/libpolkit-context.c         |    2 +-
 libpolkit/libpolkit-privilege-cache.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 6d42a04772497cb9ce37a33f46903fcaa60e574f
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 21:01:35 2007 -0400

    refine file monitoring interface and implement policy reload

 libpolkit/libpolkit-context.c         |  135
 +++++++++++++++++++++++++++-----
 libpolkit/libpolkit-context.h         |   98 ++++++++++++++++++++++--
 libpolkit/libpolkit-privilege-cache.c |    3 +
 3 files changed, 208 insertions(+), 28 deletions(-)

commit 01b261ee507efe9b96ff8736127525b8abd39ecf
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 21:01:14 2007 -0400

    make polkit-privilege-file-validate accept multiple files

 doc/man/polkit-privilege-file-validate.1.in |    9 +--
 tools/polkit-check-caller.c                 |    8 +-
 tools/polkit-check-session.c                |    8 +-
 tools/polkit-privilege-file-validate.c      |  103
 ++++++++------------------
 4 files changed, 43 insertions(+), 85 deletions(-)

commit 936ca49edb4ea8efa15d336797a3d66269c9e1f4
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 16:23:47 2007 -0400

    move to using _pk_debug and respect $POLKIT_DEBUG

 libpolkit/Makefile.am                      |    3 +-
 libpolkit/libpolkit-caller.c               |   13 +++--
 libpolkit/libpolkit-context.c              |   12 ++++-
 libpolkit/libpolkit-debug.c                |   69
 ++++++++++++++++++++++++++++
 libpolkit/libpolkit-debug.h                |   38 +++++++++++++++
 libpolkit/libpolkit-privilege-cache.c      |   11 +++--
 libpolkit/libpolkit-privilege-default.c    |   21 ++++----
 libpolkit/libpolkit-privilege-file-entry.c |    7 ++-
 libpolkit/libpolkit-privilege.c            |    3 +-
 libpolkit/libpolkit-resource.c             |    3 +-
 libpolkit/libpolkit-seat.c                 |    3 +-
 libpolkit/libpolkit-session.c              |   16 ++++---
 libpolkit/libpolkit.c                      |    9 ++--
 13 files changed, 167 insertions(+), 41 deletions(-)

commit b18bb2d892fc073528552d1094659a0d1902ef18
Author: David Zeuthen <davidz@redhat.com>
Date:   Fri Apr 6 14:09:02 2007 -0400

    read privilege files and actually use the policy described in those

 Makefile.am                                 |    2 +-
 configure.in                                |    1 +
 doc/api/libpolkit/libpolkit-docs.xml        |    3 +
 doc/man/Makefile.am                         |    2 +-
 doc/man/polkit-privilege-file-validate.1.in |   55 +++++
 doc/spec/Makefile.am                        |    2 +-
 examples/polkit-example-privilege.priv      |   12 -
 libpolkit/Makefile.am                       |   32 ++-
 libpolkit/libpolkit-caller.c                |   15 ++
 libpolkit/libpolkit-caller.h                |    2 +
 libpolkit/libpolkit-context.c               |   40 +++-
 libpolkit/libpolkit-context.h               |    5 +-
 libpolkit/libpolkit-error.h                 |    4 +-
 libpolkit/libpolkit-privilege-cache.c       |  241 ++++++++++++++++++++
 libpolkit/libpolkit-privilege-cache.h       |   50 ++++
 libpolkit/libpolkit-privilege-default.c     |  324
 +++++++++++++++++++++++++++
 libpolkit/libpolkit-privilege-default.h     |   61 +++++
 libpolkit/libpolkit-privilege-file-entry.c  |  177 +++++++++++++++
 libpolkit/libpolkit-privilege-file-entry.h  |   51 +++++
 libpolkit/libpolkit-privilege-file.c        |  147 ++++++-------
 libpolkit/libpolkit-privilege-file.h        |    9 +-
 libpolkit/libpolkit-privilege.c             |   13 +
 libpolkit/libpolkit-privilege.h             |    2 +
 libpolkit/libpolkit-resource.c              |   13 +
 libpolkit/libpolkit-resource.h              |    2 +
 libpolkit/libpolkit-result.c                |    2 +-
 libpolkit/libpolkit-result.h                |    2 +
 libpolkit/libpolkit-seat.c                  |   13 +
 libpolkit/libpolkit-seat.h                  |    2 +
 libpolkit/libpolkit-session.c               |   15 ++
 libpolkit/libpolkit-session.h               |    2 +
 libpolkit/libpolkit.c                       |   79 +++++++-
 privileges/Makefile.am                      |   17 ++
 privileges/polkit-example-privilege.priv    |   15 ++
 tools/Makefile.am                           |    1 -
 tools/polkit-check-caller.c                 |    9 +-
 tools/polkit-check-session.c                |    9 +-
 37 files changed, 1310 insertions(+), 121 deletions(-)

commit 5a74d9b7a123f0bed10c857863e81bc88c402d8e
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Apr 4 16:52:59 2007 -0400

    provide an example privilege file

 examples/polkit-example-privilege.priv |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit a7f9248ffe5d1a18216003367d6ffb5f0a4c3224
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Apr 4 16:38:34 2007 -0400

    include PolKitPrivilegeFile in API docs

 doc/api/libpolkit/libpolkit-docs.xml |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 6451bbb85b2d8636f6e3197e8f62484ce1cfd8e4
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Apr 4 16:26:20 2007 -0400

    introduce a PolKitResult enumeration and make privilege files use that

 doc/api/libpolkit/libpolkit-docs.xml |    2 +
 libpolkit/Makefile.am                |    4 +
 libpolkit/libpolkit-error.c          |   61 +++++++++++++++++
 libpolkit/libpolkit-error.h          |   53 +++++++++++++++
 libpolkit/libpolkit-privilege-file.c |   63 ++++++++----------
 libpolkit/libpolkit-result.c         |  118
 ++++++++++++++++++++++++++++++++++
 libpolkit/libpolkit-result.h         |   72 +++++++++++++++++++++
 libpolkit/libpolkit.c                |   42 +++++++------
 libpolkit/libpolkit.h                |   22 ++-----
 9 files changed, 366 insertions(+), 71 deletions(-)

commit 4de5d6c6d44b8cbe46530648e53d006b24b8942d
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Apr 4 03:08:09 2007 -0400

    add support for privilege files and provide a validation tool

 libpolkit/Makefile.am                  |   22 ++--
 libpolkit/libpolkit-privilege-file.c   |  220
 ++++++++++++++++++++++++++++++++
 libpolkit/libpolkit-privilege-file.h   |   43 ++++++
 libpolkit/libpolkit.c                  |    5 +
 libpolkit/libpolkit.h                  |    9 ++
 tools/Makefile.am                      |    6 +-
 tools/polkit-privilege-file-validate.c |  137 ++++++++++++++++++++
 7 files changed, 431 insertions(+), 11 deletions(-)

commit 3df61e0e3fe823b1381f4744bea6ee19d7e1d055
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Apr 4 00:39:16 2007 -0400

    get rid of AS_AC_EXPAND and use autoconf docdir

    Inspired by recent patches to both HAL and ConsoleKit from Michael
    Biebl <mbiebl@gmail.com>.

 acinclude.m4                      |   46
 -------------------------------------
 configure.in                      |   38 +++++++-----------------------
 doc/man/Makefile.am               |   12 ++++++++-
 doc/man/polkit-check-caller.1.in  |    2 +-
 doc/man/polkit-check-session.1.in |    2 +-
 libpolkit/Makefile.am             |    2 +-
 libpolkit/libpolkit.c             |    5 +--
 tools/Makefile.am                 |    2 +-
 8 files changed, 25 insertions(+), 84 deletions(-)

commit 6477d09279704e98bd2d8d18f68890f5cce305ec
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Mar 29 01:17:40 2007 -0400

    no need to mention $(top_srcdir) twice

 tools/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 0cc0ffde5aff51f08fa7642bbe4221dd138eaf05
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Mar 29 01:06:16 2007 -0400

    build fix so 'make distcheck' works

 libpolkit/Makefile.am |    1 +
 tools/Makefile.am     |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 416921898aa80a0135855bd7a790053d460cf111
Author: David Zeuthen <davidz@redhat.com>
Date:   Thu Mar 29 00:46:42 2007 -0400

    add two tools polkit-check-caller and polkit-check-session

 configure.in                         |    6 +
 doc/api/libpolkit/libpolkit-docs.xml |    4 +-
 doc/man/Makefile.am                  |    4 +-
 doc/man/polkit-check-caller.1.in     |   65 +++++++++
 doc/man/polkit-check-session.1.in    |   65 +++++++++
 libpolkit.pc.in                      |    2 +-
 libpolkit/Makefile.am                |    4 +-
 libpolkit/libpolkit-caller.c         |  173 ++++++++++++++++++++++--
 libpolkit/libpolkit-caller.h         |   26 ++--
 libpolkit/libpolkit-privilege.c      |    2 +-
 libpolkit/libpolkit-resource.c       |    4 +-
 libpolkit/libpolkit-seat.c           |    2 +-
 libpolkit/libpolkit-session.c        |  245
 +++++++++++++++++++++++++++++++++-
 libpolkit/libpolkit-session.h        |    5 +-
 libpolkit/libpolkit.c                |    7 +
 libpolkit/libpolkit.h                |    2 +
 tools/Makefile.am                    |    9 +-
 tools/polkit-check-caller.c          |  172 ++++++++++++++++++++++++
 tools/polkit-check-session.c         |  180 +++++++++++++++++++++++++
 19 files changed, 935 insertions(+), 42 deletions(-)

commit 5dabca219d230f8c66050467d6df7f392db5bcd8
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 20:10:52 2007 -0400

    implement the classes carrying data

 libpolkit/libpolkit-caller.c    |  108
 +++++++++++++++++++++++++++++----------
 libpolkit/libpolkit-caller.h    |    4 +-
 libpolkit/libpolkit-context.c   |   45 +++++++++++-----
 libpolkit/libpolkit-privilege.c |   52 +++++++++++++-----
 libpolkit/libpolkit-resource.c  |   73 +++++++++++++++++++++-----
 libpolkit/libpolkit-seat.c      |   50 +++++++++++++-----
 libpolkit/libpolkit-session.c   |  102
 +++++++++++++++++++++++++++++--------
 libpolkit/libpolkit-session.h   |    2 +-
 8 files changed, 323 insertions(+), 113 deletions(-)

commit a2974bdaadef0f06c3f8dd5d2c76170a53fe4b86
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 18:08:50 2007 -0400

    document the API

    Now I only need to implement it...

 doc/api/libpolkit/libpolkit-docs.xml |   10 ++-
 libpolkit/libpolkit-caller.c         |  120 +++++++++++++++++++++++++++-
 libpolkit/libpolkit-caller.h         |   22 +++---
 libpolkit/libpolkit-context.c        |   48 +++++++++++-
 libpolkit/libpolkit-context.h        |   10 +--
 libpolkit/libpolkit-privilege.c      |   54 ++++++++++++-
 libpolkit/libpolkit-privilege.h      |    6 +-
 libpolkit/libpolkit-resource.c       |   70 ++++++++++++++++-
 libpolkit/libpolkit-resource.h       |    6 +-
 libpolkit/libpolkit-seat.c           |   54 ++++++++++++-
 libpolkit/libpolkit-seat.h           |   14 ++--
 libpolkit/libpolkit-session.c        |  148
 +++++++++++++++++++++++++++++++++-
 libpolkit/libpolkit-session.h        |   36 ++++----
 13 files changed, 539 insertions(+), 59 deletions(-)

commit 96e73f52582e3517d0925fa402bb4bb349123b10
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 14:50:02 2007 -0400

    split libpolkit into more source/header files

 libpolkit.pc.in                 |    2 +-
 libpolkit/Makefile.am           |   26 +++-
 libpolkit/libpolkit-caller.c    |  116 +++++++++++++++
 libpolkit/libpolkit-caller.h    |   55 +++++++
 libpolkit/libpolkit-context.c   |   69 +++++++++
 libpolkit/libpolkit-context.h   |   61 ++++++++
 libpolkit/libpolkit-privilege.c |   72 +++++++++
 libpolkit/libpolkit-privilege.h |   45 ++++++
 libpolkit/libpolkit-resource.c  |   83 +++++++++++
 libpolkit/libpolkit-resource.h  |   47 ++++++
 libpolkit/libpolkit-seat.c      |   72 +++++++++
 libpolkit/libpolkit-seat.h      |   45 ++++++
 libpolkit/libpolkit-session.c   |  128 ++++++++++++++++
 libpolkit/libpolkit-session.h   |   57 +++++++
 libpolkit/libpolkit.c           |  312
 ---------------------------------------
 libpolkit/libpolkit.h           |   98 +------------
 16 files changed, 876 insertions(+), 412 deletions(-)

commit 9a0ad18906cddce8e6a0d0d784bad3493dbfac71
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 14:11:56 2007 -0400

    proposed API

 libpolkit/libpolkit.c |  400
 +++++++++++++++++++++++++++++++++++++++++++++++++
 libpolkit/libpolkit.h |  129 ++++++++++++++++
 2 files changed, 529 insertions(+), 0 deletions(-)

commit e90a077762f58b825008864f1facb8462269b7b2
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 14:11:00 2007 -0400

    update to the gtk-doc.make from the HAL project

 gtk-doc.make |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 5e55b4a226590b18bebc65b864ba323e69769939
Author: David Zeuthen <davidz@redhat.com>
Date:   Wed Mar 28 13:01:37 2007 -0400

    reset project and remove all existing code

    Some of the code, e.g. the daemon, will be brought back in other
    forms.

 COPYING                                 |    4 +-
 Makefile.am                             |   11 +-
 NEWS                                    |    2 +-
 configure.in                            |  263 +------
 doc/Makefile.am                         |    2 +-
 doc/TODO                                |   40 +-
 doc/api/Makefile.am                     |   47 +--
 doc/api/libpolkit/Makefile.am           |   67 ++
 doc/api/libpolkit/libpolkit-docs.xml    |  109 +++
 doc/api/libpolkit/version.xml.in        |    1 +
 doc/api/polkit-docs.xml                 |   15 -
 doc/api/tmpl/libpolkit.sgml             |  114 ---
 doc/man/Makefile.am                     |   13 +
 doc/spec/Makefile.am                    |   32 +-
 doc/spec/config.xsl                     |    6 +
 doc/spec/docbook.css                    |   18 +
 doc/spec/polkit-arch.dia                |  Bin 2952 -> 0 bytes
 doc/spec/polkit-arch.png                |  Bin 59513 -> 0 bytes
 doc/spec/polkit-spec-introduction.xml   |   15 +
 doc/spec/polkit-spec.html               |  384 ----------
 doc/spec/polkit-spec.xml.in             |  628 ----------------
 doc/spec/polkit-spec.xml.in.in          |   24 +
 libpolkit.pc.in                         |   11 +
 libpolkit/Makefile.am                   |   31 +-
 libpolkit/libpolkit-grant.c             |  407 -----------
 libpolkit/libpolkit-grant.h             |  125 ----
 libpolkit/libpolkit.c                   |  376 +----------
 libpolkit/libpolkit.h                   |   46 +--
 pam-polkit-console/.gitignore           |    7 -
 pam-polkit-console/Makefile.am          |   18 -
 pam-polkit-console/pam-polkit-console.c |  262 -------
 policy-kit.in                           |    8 -
 polkit-interface-manager.xml            |   48 --
 polkit-interface-session.xml            |   50 --
 polkit.pc.in                            |   11 -
 polkitd/.gitignore                      |   13 -
 polkitd/Makefile.am                     |   94 ---
 polkitd/PolicyKit.conf.in               |   20 -
 polkitd/PolicyKit.in                    |   80 --
 polkitd/debug-polkitd.sh                |    9 -
 polkitd/main.c                          |  303 --------
 polkitd/policy.c                        | 1217
 -------------------------------
 polkitd/policy.h                        |  103 ---
 polkitd/polkit-manager.c                | 1089
 ---------------------------
 polkitd/polkit-manager.h                |  132 ----
 polkitd/polkit-marshal.list             |    1 -
 polkitd/polkit-session.c                | 1013 -------------------------
 polkitd/polkit-session.h                |  122 ---
 polkitd/polkitd-test.c                  |  275 -------
 polkitd/run-polkitd.sh                  |    7 -
 polkitd/valgrind-polkitd.sh             |    4 -
 privileges/.gitignore                   |    3 -
 privileges/Makefile.am                  |    7 -
 privileges/desktop-console.privilege    |   14 -
 tools/Makefile.am                       |   21 +-
 tools/polkit-grant-privilege.c          |  331 ---------
 tools/polkit-is-privileged.c            |  203 -----
 tools/polkit-list-privileges.c          |  209 ------
 tools/polkit-revoke-privilege.c         |  198 -----
 59 files changed, 329 insertions(+), 8334 deletions(-)

commit e97e945ee59320cb15ec81958b2fa1c08653a8f6
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Mon Aug 21 20:41:21 2006 +0200

    fix make distcheck

    A quick (and dirty) fix to get 'make distcheck' complete running and
    to fix polkitd-test

 polkitd/polkitd-test.c |   17 ++++++++++++++---
 1 files changed, 14 insertions(+), 3 deletions(-)

commit ae74decdae3b087e92f5d7408d05f3eef8d72718
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Mon Aug 21 20:28:09 2006 +0200

    stop configure if pam/pam-devel is missing

    This little patch fixes configure to stop and print a error message if
    pam/pam-devel is missing while run configure for PolicyKit

 configure.in |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 1043f61430e1d06c0d44a4ad2146e66313f0a4ad
Author: Danny Kukawka <danny.kukawka@web.de>
Date:   Sat Jul 29 10:42:14 2006 -0400

    Patch from Danny Kukawka <danny.kukawka@web.de> with some cleanup.s

	* pam-polkit-console/pam-polkit-console.c: (pam_sm_open_session),
	(pam_sm_close_session): fixed usage of pam_get_item() to respect
	strict-aliasing rules

	    * polkitd/polkit-manager.c: (polkit_manager_get_caller_info):
	added ifdef around currently unused calling_selinux_context

	    * tools/polkit-grant-privilege.c: (grant_complete_cb):
	    replaced
	libpolkit_free_context() with correct
	libpolkit_grant_free_context()

 pam-polkit-console/pam-polkit-console.c |    8 ++++----
 polkitd/polkit-manager.c		 |    3 ++-
 tools/polkit-grant-privilege.c		 |    2 +-
 3 files changed, 7 insertions(+), 6 deletions(-)

commit accea27e3816d1685d6543094bebdfdb01499ffc
Author: David Zeuthen <davidz@redhat.com>
Date:	Sat Jul 29 10:39:05 2006 -0400

    Add ChangeLog and *.tar.gz to .gitignore.

 .gitignore |	 2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 1c45f6df90ce7968fd212c8c8f92fd2840ce6ce2
Author: David Zeuthen <davidz@zelda.fubar.dk>
Date:	Thu Jul 27 20:52:26 2006 -0400

    Remove ChangeLog file and add rules to Makefile.am to generate one for
    disted tarballs.

 ChangeLog		   |  308
 ---------------------------------------------
 Makefile.am		   |   22 +++-
 doc/spec/polkit-spec.html |   28 ++--
 3 files changed, 35 insertions(+), 323 deletions(-)

commit 520608eedd5652ad51acc27073f8a6c75abc0c8b
Author: Kay Sievers <kay.sievers@suse.de>
Date:	Thu Jul 27 22:44:44 2006 +0200

    .cvsignore -> .gitignore

 .cvsignore		       |   29 -----------------------------
 .gitignore		       |   30 ++++++++++++++++++++++++++++++
 doc/.cvsignore		       |    2 --
 doc/.gitignore		       |    3 +++
 doc/spec/polkit-spec.html     |   28 ++++++++++++++--------------
 libpolkit/.cvsignore	       |    6 ------
 libpolkit/.gitignore	       |    9 +++++++++
 pam-polkit-console/.gitignore |    7 +++++++
 polkitd/.cvsignore	       |   12 ------------
 polkitd/.gitignore	       |   13 +++++++++++++
 privileges/.cvsignore	       |    2 --
 privileges/.gitignore	       |    3 +++
 tools/.cvsignore	       |   10 ----------
 tools/.gitignore	       |    9 +++++++++
 14 files changed, 88 insertions(+), 75 deletions(-)

commit 20ffc4f71091851d8e5d3f0dc9d098d2032c8081
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Jun 7 00:26:55 2006 +0000

    For now, comment out SELinux stuff as it breaks when SELinux is not
	available.

 ChangeLog		     |	  6 ++++
 doc/api/tmpl/libpolkit.sgml |	 55
 +++++++++++++++++++++++++++++++++++++++++-
 doc/spec/polkit-spec.html   |	 26 ++++++++++----------
 polkitd/polkit-manager.c    |	  2 +
 4 files changed, 74 insertions(+), 15 deletions(-)

commit 997e27a4fc98763881e8c10fd8a071df7d3323ea
Author: David Zeuthen <david@fubar.dk>
Date:	Tue Jun 6 14:48:27 2006 +0000

    Patch from Frederic Peters <fpeters@entrouvert.com>. jhbuild
    monitors files
	being installed and prevents them from being written out of
	its target
	directory. This means HAL now prevents jhautobuild[1] to
	complete since
	pam-polkit-console hardcodes /lib/security. Attached is a patch
	with a
	configure option (--with-pam-module-dir) so it is possible to
	set an
	other directory. [1] http://jhbuild.bxlug.be

 ChangeLog			|   13 +++++++++++++
 configure.in			|   12 ++++++++++++
 doc/spec/polkit-spec.html	|   26 +++++++++++++-------------
 pam-polkit-console/Makefile.am |    2 +-
 4 files changed, 39 insertions(+), 14 deletions(-)

commit 8be672ff73c76f99b15f72cc9fb1b3eb4d1a778c
Author: David Zeuthen <david@fubar.dk>
Date:	Tue Jun 6 11:55:50 2006 +0000

    Patch from Frederic Peters <fpeters@entrouvert.com>.
	http://jhbuild.bxlug.be/builds/2006-06-06-0000/logs/PolicyKit/#build
	shows a error when building newest PolicyKit with Debian PAM
	libraries.
    Attached patch adds new configure checks; pam-polkit-console.c
    may need
	alternate behaviour if pam_vsyslog is missing (using straight
	vsyslog?).
    configure.in,

 ChangeLog				 |   15 +++++++++++++++
 configure.in				 |    3 +++
 doc/TODO				 |    3 +++
 doc/spec/polkit-spec.html		 |   26 +++++++++++++-------------
 pam-polkit-console/pam-polkit-console.c |    7 +++++++
 5 files changed, 41 insertions(+), 13 deletions(-)

commit 1c3d5691ad444ae2849d079e3745d6b476614623
Author: David Zeuthen <david@fubar.dk>
Date:	Mon Jun 5 23:39:00 2006 +0000

    Lots of changes! Almost ready for 0.2 release.

 ChangeLog				 |   73 ++
 Makefile.am				 |    2 +-
 README					 |    1 -
 configure.in				 |    9 +-
 doc/TODO				 |   37 +-
 doc/api/polkit-docs.xml		 |    3 +-
 doc/spec/Makefile.am			 |    2 +-
 doc/spec/polkit-spec.html		 | 1165
 ++++++++-----------------------
 doc/spec/polkit-spec.xml.in		 |  259 ++++++-
 libpolkit/Makefile.am			 |   27 +-
 libpolkit/libpolkit-grant.c		 |  407 +++++++++++
 libpolkit/libpolkit-grant.h		 |  125 ++++
 libpolkit/libpolkit.c			 |   60 ++-
 libpolkit/libpolkit.h			 |   10 +-
 pam-polkit-console/Makefile.am		 |   18 +
 pam-polkit-console/pam-polkit-console.c |  255 +++++++
 polkit-interface-manager.xml		 |   22 +-
 polkit-interface-session.xml		 |    3 +-
 polkit.pc.in				 |    4 -
 polkitd/PolicyKit.in			 |   10 +-
 polkitd/main.c				 |  102 +++-
 polkitd/policy.c			 |  480 ++++++++++++-
 polkitd/policy.h			 |   97 ++-
 polkitd/polkit-manager.c		 |  375 +++++++++--
 polkitd/polkit-manager.h		 |   11 +-
 polkitd/polkit-session.c		 |   61 +-
 polkitd/polkit-session.h		 |    7 +-
 privileges/desktop-console.privilege	 |   12 +-
 tools/Makefile.am			 |   18 +-
 tools/polkit-grant-privilege.c		 |  248 ++-----
 tools/polkit-is-privileged.c		 |   31 +-
 tools/polkit-list-privileges.c		 |   27 +-
 tools/polkit-revoke-privilege.c	 |   22 +-
 33 files changed, 2673 insertions(+), 1310 deletions(-)

commit 12d20fc8a71b59584f5636ac4dc85c36e45c0157
Author: David Zeuthen <david@fubar.dk>
Date:	Sat Apr 22 23:27:14 2006 +0000

    Update to new D-BUS API; print " (temporary)" for privilege if
    appropriate.
    Update to new D-BUS API
    Update to new D-BUS API (main): --do--
    New file
    Add build rules for polkit-revoke-privilege
    Fix up prototypes
    Update to new D-BUS API
	(polkit_manager_get_allowed_resources_for_privilege): --do--
	(polkit_manager_revoke_temporary_privilege): New function
	(polkit_manager_remove_temporary_privilege): Fix up resource
	handling
	(polkit_manager_add_temporary_privilege): --do--
    Update to new D-BUS API and export
    libpolkit_revoke_temporary_privilege()
    Update to new D-BUS API
	(libpolkit_get_allowed_resources_for_privilege_for_uid): --do--
	(libpolkit_revoke_temporary_privilege): New function
    Rename InitiatePrivilegeGrant() to
    InitiateTemporaryPrivilegeGrant(). Add
	new function RevokeTemporaryPrivilege(). Make IsUserPrivileged()
	output
	a boolean is_temporary. GetAllowedResourcesForPrivilege() now also
	outputs an integer num_non_temp.

 ChangeLog			 |   40 ++++++++
 libpolkit/libpolkit.c		 |   87 +++++++++++++++++-
 libpolkit/libpolkit.h		 |   10 ++-
 polkit-interface-manager.xml	 |   18 +++-
 polkitd/polkit-manager.c	 |   95 +++++++++++++++++--
 polkitd/polkit-manager.h	 |    8 ++-
 tools/Makefile.am		 |   11 ++-
 tools/polkit-grant-privilege.c  |   21 ++--
 tools/polkit-is-privileged.c	 |    4 +-
 tools/polkit-list-privileges.c  |   37 +++++---
 tools/polkit-revoke-privilege.c |  192
 +++++++++++++++++++++++++++++++++++++++
 11 files changed, 476 insertions(+), 47 deletions(-)

commit 5122b4d864b2c300a81a1d33049d04810c512b7c
Author: David Zeuthen <david@fubar.dk>
Date:	Sat Apr 22 02:24:00 2006 +0000

    Write some more stuff

 ChangeLog		     |	  4 +
 doc/spec/polkit-spec.html   |	400
 ++++++++++++++++++++++++++++++++++++++-----
 doc/spec/polkit-spec.xml.in |	206 +++++++++++++++++++++-
 3 files changed, 561 insertions(+), 49 deletions(-)

commit 22dff7602768a1ac5af4a602bae66ed5a461dc6b
Author: Richard Hughes <hughsient@gmail.com>
Date:	Tue Apr 4 19:04:20 2006 +0000

    Add in the new spec directory so we add the folder to the tarball.
    Fix this up in one place so it validates and so that make distcheck
    can run
	again..

 ChangeLog		     |	  8 ++++++++
 doc/Makefile.am	     |	  2 +-
 doc/spec/polkit-spec.xml.in |	 14 ++++++++------
 3 files changed, 17 insertions(+), 7 deletions(-)

commit 26a1e63b29488285b75fb3afb20355931ec286dc
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 29 16:15:28 2006 +0000

    Add docbook detection
    New files
    Free the questions to prevent memory leak

 ChangeLog		     |	  9 ++
 configure.in		     |	 34 ++++++
 doc/spec/polkit-spec.html   |	275
 ++++++++++++++++++++++++++++++++++++++++++-
 doc/spec/polkit-spec.xml.in |	 86 +++++++++++++-
 polkitd/polkit-session.c    |	  4 +-
 5 files changed, 399 insertions(+), 9 deletions(-)

commit a586d9605ba35127aff073203980b130606fa4cb
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 29 02:18:56 2006 +0000

    initial commit

 doc/spec/Makefile.am	     |	 24 +++
 doc/spec/polkit-arch.dia    |	Bin 0 -> 2952 bytes
 doc/spec/polkit-arch.png    |	Bin 0 -> 59513 bytes
 doc/spec/polkit-spec.html   |	348
 +++++++++++++++++++++++++++++++++++++++++++
 doc/spec/polkit-spec.xml.in |	169 +++++++++++++++++++++
 5 files changed, 541 insertions(+), 0 deletions(-)

commit 0b0f50123e357ebb7261c45e1ea10c4182200459
Author: Richard Hughes <hughsient@gmail.com>
Date:	Mon Mar 27 08:37:28 2006 +0000

    Add these files.

 .cvsignore	       |   29 +++++++++++++++++++++++++++++
 ChangeLog	       |    6 ++++++
 doc/.cvsignore        |    2 ++
 libpolkit/.cvsignore  |    6 ++++++
 polkitd/.cvsignore    |   12 ++++++++++++
 privileges/.cvsignore |    2 ++
 tools/.cvsignore      |   10 ++++++++++
 7 files changed, 67 insertions(+), 0 deletions(-)

commit 52a260b837596002c520cfea12162ab873941cd2
Author: David Zeuthen <david@fubar.dk>
Date:	Fri Mar 17 00:23:00 2006 +0000

    remove code that shouldn't be committed

 tools/polkit-grant-privilege.c |    7 -------
 1 files changed, 0 insertions(+), 7 deletions(-)

commit 7527634309362c42cd851428769e300cd6b311bf
Author: David Zeuthen <david@fubar.dk>
Date:	Fri Mar 17 00:21:31 2006 +0000

    Remember to kill the child here

 ChangeLog			|    5 +++++
 polkitd/polkit-session.c	|    4 ++++
 tools/polkit-grant-privilege.c |    7 +++++++
 3 files changed, 16 insertions(+), 0 deletions(-)

commit 11176b6bcc85b50a26eb86ef452e31d3193285ef
Author: David Zeuthen <david@fubar.dk>
Date:	Thu Mar 16 23:36:16 2006 +0000

    forgot ChangeLog for polkitd/main.c

 ChangeLog |	2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 4fa68a3d911f91c2a6c8af07c673ee8656d3b082
Author: David Zeuthen <david@fubar.dk>
Date:	Thu Mar 16 23:28:47 2006 +0000

    Unref when the child dies (polkit_session_initiate_auth): Ref
    the object
	after creating child (polkit_session_initiator_disconnected):
	Make sure
	to nuke the kids

 ChangeLog		  |    6 ++++++
 polkitd/main.c		  |    6 +++++-
 polkitd/polkit-session.c |   11 +++++++++++
 3 files changed, 22 insertions(+), 1 deletions(-)

commit f6dd9fa05c574803a2594ed93abb986ae6ec4dcf
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 15 16:11:33 2006 +0000

    Include sys/types.h; fixed fd.o bug #6280. Patch from Wouter
    Bolsterlee
	<uws+freedesktop@xs4all.nl>.

 ChangeLog		  |    5 +++++
 polkitd/polkit-manager.h |    1 +
 2 files changed, 6 insertions(+), 0 deletions(-)

commit fcb7e7f45ad8c92844a019c318f7add4accea3e6
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 15 00:33:35 2006 +0000

    Change priorities from 90 10 to 98 02 to make this work
    Remove user="@POLKIT_USER@" bits as I'm not sure we need a dedicated
    user
    Cosmetic things

 ChangeLog		   |   10 ++++++++++
 configure.in		   |	4 ++--
 polkitd/PolicyKit.conf.in |	3 ---
 polkitd/PolicyKit.in	   |	2 +-
 4 files changed, 13 insertions(+), 6 deletions(-)

commit 4203c0a966ec2b8004334cf36ca5123384c93657
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 15 00:29:38 2006 +0000

    remove Makefile.in; it's not needed

 tools/Makefile.in |  545
 -----------------------------------------------------
 1 files changed, 0 insertions(+), 545 deletions(-)

commit 07c379656956b082257214ca7196b90cb0b98fb2
Author: Kay Sievers <kay.sievers@vrfy.org>
Date:	Wed Mar 15 00:19:57 2006 +0000

    Add SUSE distro bits.

 ChangeLog     |    7 ++++++
 configure.in  |   58
 ++++++++++++++++++++++++++++++++++++++++++++++----------
 policy-kit.in |    8 +++---
 3 files changed, 58 insertions(+), 15 deletions(-)

commit 8ac28d7c3aa706fe527a38bb8ed87e76e4dd1006
Author: David Zeuthen <david@fubar.dk>
Date:	Tue Mar 14 06:20:47 2006 +0000

    forgot two files

 polkitd/PolicyKit.conf.in |   23 ++++++++++++++
 polkitd/PolicyKit.in	   |   74
 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 97 insertions(+), 0 deletions(-)

commit 96f6daa63d428d9a16d8564b83f33b71e1cd41ca
Author: David Zeuthen <david@fubar.dk>
Date:	Tue Mar 14 06:14:33 2006 +0000

    Add a bunch of code; basically a full rewrite moving all queries
    to the
	daemon.

 COPYING			      |    4 +
 ChangeLog			      |   75 +++
 Makefile.am			      |    7 +-
 configure.in			      |  156 +++++-
 doc/api/tmpl/libpolkit.sgml	      |  304 +----------
 libpolkit/Makefile.am		      |   16 +-
 libpolkit/libpolkit-test.c	      |  280 ----------
 libpolkit/libpolkit.c		      |  833 +++++-----------------------
 libpolkit/libpolkit.h		      |  122 +----
 policy-kit.in			      |    8 +
 polkit-interface-manager.xml	      |   36 ++
 polkit-interface-session.xml	      |   51 ++
 polkit.pc.in			      |    2 +-
 polkitd/Makefile.am		      |   94 ++++
 polkitd/debug-polkitd.sh	      |    9 +
 polkitd/main.c			      |  229 ++++++++
 polkitd/policy.c		      |  765 ++++++++++++++++++++++++++
 polkitd/policy.h		      |   76 +++
 polkitd/polkit-manager.c	      |  720 ++++++++++++++++++++++++
 polkitd/polkit-manager.h	      |  120 ++++
 polkitd/polkit-marshal.list	      |    1 +
 polkitd/polkit-session.c	      | 1003
 ++++++++++++++++++++++++++++++++++
 polkitd/polkit-session.h	      |  123 +++++
 polkitd/polkitd-test.c		      |  264 +++++++++
 polkitd/run-polkitd.sh		      |    7 +
 polkitd/valgrind-polkitd.sh	      |    4 +
 privileges/Makefile.am		      |    7 +
 privileges/desktop-console.privilege |    4 +
 tools/Makefile.am		      |   31 +-
 tools/Makefile.in		      |   76 +++-
 tools/polkit-grant-privilege.c       |  434 +++++++++++++++
 tools/polkit-is-privileged.c	      |  102 ++--
 tools/polkit-list-privileges.c       |  183 ++++++
 33 files changed, 4702 insertions(+), 1444 deletions(-)

commit 4f567cd7eef1cb7fcd5777a0ba2b6df03e5ea88c
Author: David Zeuthen <david@fubar.dk>
Date:	Thu Mar 9 17:14:48 2006 +0000

    Use right Cflags

 ChangeLog    |    4 ++++
 polkit.pc.in |    2 +-
 2 files changed, 5 insertions(+), 1 deletions(-)

commit 01480a0a3a29ea19d9eec64957500b3f10782f9a
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 03:28:58 2006 +0000

    s/hal-policy/polkit/

 ChangeLog		      |    4 ++++
 tools/polkit-is-privileged.c |    6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)

commit 2fc39a9c0613aac4d2b27d1c5c5f5a007fa8e0ee
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 02:56:14 2006 +0000

    Use simpler names: user, group and txtsrc :-/

 ChangeLog    |    4 ++++
 polkit.pc.in |    6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)

commit e38d77bc2e264037178260f8c2add199d19a0950
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 02:53:45 2006 +0000

    Add libpoluser, libpolgroup and libpoltxtsrc variables

 ChangeLog    |    4 ++++
 polkit.pc.in |    4 ++++
 2 files changed, 8 insertions(+), 0 deletions(-)

commit 05ccc643324f43b9ff9b8fec05ea3dcd60685f27
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 02:45:24 2006 +0000

    s/-llibpolkit/-lpolkit/

 ChangeLog		     |	  4 ++++
 doc/api/tmpl/libpolkit.sgml |	  2 --
 polkit.pc.in		     |	  2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

commit ad38877e473b0c61a320d9d514edeb127187ae67
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 01:52:03 2006 +0000

    Initial import

commit 9a089c64d4c3b16038ed3acb526102d861cc033c
Author: David Zeuthen <david@fubar.dk>
Date:	Wed Mar 8 01:52:03 2006 +0000

    Initial revision

 AUTHORS			 |    1 +
 COPYING			 |  551 ++++++++++++++++++++++++++
 ChangeLog			 |    4 +
 HACKING			 |   16 +
 Makefile.am			 |   13 +
 NEWS				 |    9 +
 README				 |   14 +
 acinclude.m4			 |   97 +++++
 autogen.sh			 |   93 +++++
 configure.in			 |  198 +++++++++
 doc/Makefile.am		 |    7 +
 doc/TODO			 |    2 +
 doc/api/Makefile.am		 |   46 +++
 doc/api/polkit-docs.xml	 |   14 +
 doc/api/tmpl/libpolkit.sgml	 |  357 +++++++++++++++++
 gtk-doc.make			 |  153 +++++++
 libpolkit/Makefile.am		 |   39 ++
 libpolkit/libpolkit-test.c	 |  280 +++++++++++++
 libpolkit/libpolkit.c		 |  836
 +++++++++++++++++++++++++++++++++++++++
 libpolkit/libpolkit.h		 |  151 +++++++
 mkinstalldirs			 |  111 ++++++
 polkit.pc.in			 |   11 +
 tools/Makefile.am		 |   20 +
 tools/Makefile.in		 |  487 +++++++++++++++++++++++
 tools/polkit-is-privileged.c	 |  194 +++++++++
 25 files changed, 3704 insertions(+), 0 deletions(-)
